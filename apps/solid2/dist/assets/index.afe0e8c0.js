const jl=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}};jl();const Ke={};let Kl=Co;const Tr={},vn=1,Hn=2,wo={owned:null,cleanups:null,context:null,owner:null};var bt=null;let ar=null,en=null,mt=null,qt=null,qs=0;function Ql(e,t){const n=bt,r=e.length===0,s=r?wo:{owned:null,cleanups:null,context:null,owner:t||n},i=r?e:()=>e(()=>zs(s));bt=s;try{return Os(i,!0)}finally{bt=n}}function Hr(e,t,n){const r=Zl(e,t,!1,vn);xo(r)}function Vl(e){if(en)return e();let t;const n=en=[];try{t=e()}finally{en=null}return Os(()=>{for(let r=0;r<n.length;r+=1){const s=n[r];if(s.pending!==Tr){const i=s.pending;s.pending=Tr,ko(s,i)}}},!1),t}function vo(e){let t;return t=e(),t}function ko(e,t,n){if(en)return e.pending===Tr&&en.push(e),e.pending=t,t;if(e.comparator&&e.comparator(e.value,t))return t;let r=!1;return e.value=t,e.observers&&e.observers.length&&Os(()=>{for(let s=0;s<e.observers.length;s+=1){const i=e.observers[s];r&&ar.disposed.has(i),(r&&!i.tState||!r&&!i.state)&&(i.pure?mt.push(i):qt.push(i),i.observers&&$o(i)),r||(i.state=vn)}if(mt.length>1e6)throw mt=[],new Error},!1),t}function xo(e){if(!e.fn)return;zs(e);const t=bt,n=qs;bt=e,Xl(e,e.value,n),bt=t}function Xl(e,t,n){let r;try{r=e.fn(t)}catch(s){Io(s)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?ko(e,r):e.value=r,e.updatedAt=n)}function Zl(e,t,n,r=vn,s){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:bt,context:null,pure:n};return bt===null||bt!==wo&&(bt.owned?bt.owned.push(i):bt.owned=[i]),i}function Eo(e){const t=ar;if(e.state===0||t)return;if(e.state===Hn||t)return jr(e);if(e.suspense&&vo(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<qs);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===vn||t)xo(e);else if(e.state===Hn||t){const s=mt;mt=null,jr(e,n[0]),mt=s}}function Os(e,t){if(mt)return e();let n=!1;t||(mt=[]),qt?n=!0:qt=[],qs++;try{const r=e();return Yl(n),r}catch(r){mt||(qt=null),Io(r)}}function Yl(e){mt&&(Co(mt),mt=null),!e&&(qt.length?Vl(()=>{Kl(qt),qt=null}):qt=null)}function Co(e){for(let t=0;t<e.length;t++)Eo(e[t])}function jr(e,t){const n=ar;e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];s.sources&&(s.state===vn||n?s!==t&&Eo(s):(s.state===Hn||n)&&jr(s,t))}}function $o(e){const t=ar;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=Hn,r.pure?mt.push(r):qt.push(r),r.observers&&$o(r))}}function zs(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),u=n.observerSlots.pop();r<s.length&&(i.sourceSlots[u]=r,s[r]=i,n.observerSlots[r]=u)}}if(e.owned){for(t=0;t<e.owned.length;t++)zs(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Io(e){throw e}function Jl(e,t){return vo(()=>e(t||{}))}function tf(e,t,n){let r=n.length,s=t.length,i=r,u=0,o=0,a=t[s-1].nextSibling,c=null;for(;u<s||o<i;){if(t[u]===n[o]){u++,o++;continue}for(;t[s-1]===n[i-1];)s--,i--;if(s===u){const l=i<r?o?n[o-1].nextSibling:n[i-o]:a;for(;o<i;)e.insertBefore(n[o++],l)}else if(i===o)for(;u<s;)(!c||!c.has(t[u]))&&t[u].remove(),u++;else if(t[u]===n[i-1]&&n[o]===t[s-1]){const l=t[--s].nextSibling;e.insertBefore(n[o++],t[u++].nextSibling),e.insertBefore(n[--i],l),t[s]=n[i]}else{if(!c){c=new Map;let f=o;for(;f<i;)c.set(n[f],f++)}const l=c.get(t[u]);if(l!=null)if(o<l&&l<i){let f=u,d=1,y;for(;++f<s&&f<i&&!((y=c.get(t[f]))==null||y!==l+d);)d++;if(d>l-o){const w=t[u];for(;o<l;)e.insertBefore(n[o++],w)}else e.replaceChild(n[o++],t[u++])}else u++;else t[u++].remove()}}}function ef(e,t,n){let r;return Ql(s=>{r=s,t===document?e():rf(t,e(),t.firstChild?null:void 0,n)}),()=>{r(),t.textContent=""}}function nf(e,t,n){const r=document.createElement("template");r.innerHTML=e;let s=r.content.firstChild;return n&&(s=s.firstChild),s}function rf(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return jn(e,t,r,n);Hr(s=>jn(e,t(),s,n),r)}function jn(e,t,n,r,s){for(Ke.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,u=r!==void 0;if(e=u&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(Ke.context)return n;if(i==="number"&&(t=t.toString()),u){let o=n[0];o&&o.nodeType===3?o.data=t:o=document.createTextNode(t),n=me(e,n,r,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean"){if(Ke.context)return n;n=me(e,n,r)}else{if(i==="function")return Hr(()=>{let o=t();for(;typeof o=="function";)o=o();n=jn(e,o,n,r)}),()=>n;if(Array.isArray(t)){const o=[],a=n&&Array.isArray(n);if(Kr(o,t,n,s))return Hr(()=>n=jn(e,o,n,r,!0)),()=>n;if(Ke.context){for(let c=0;c<o.length;c++)if(o[c].parentNode)return n=o}if(o.length===0){if(n=me(e,n,r),u)return n}else a?n.length===0?Ki(e,o,r):tf(e,n,o):(n&&me(e),Ki(e,o));n=o}else if(t instanceof Node){if(Ke.context&&t.parentNode)return n=u?[t]:t;if(Array.isArray(n)){if(u)return n=me(e,n,r,t);me(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Kr(e,t,n,r){let s=!1;for(let i=0,u=t.length;i<u;i++){let o=t[i],a=n&&n[i];if(o instanceof Node)e.push(o);else if(!(o==null||o===!0||o===!1))if(Array.isArray(o))s=Kr(e,o,a)||s;else if(typeof o=="function")if(r){for(;typeof o=="function";)o=o();s=Kr(e,Array.isArray(o)?o:[o],a)||s}else e.push(o),s=!0;else{const c=String(o);a&&a.nodeType===3&&a.data===c?e.push(a):e.push(document.createTextNode(c))}}return s}function Ki(e,t,n){for(let r=0,s=t.length;r<s;r++)e.insertBefore(t[r],n)}function me(e,t,n,r){if(n===void 0)return e.textContent="";const s=r||document.createTextNode("");if(t.length){let i=!1;for(let u=t.length-1;u>=0;u--){const o=t[u];if(s!==o){const a=o.parentNode===e;!i&&!u?a?e.replaceChild(s,o):e.insertBefore(s,n):a&&o.remove()}else i=!0}}else e.insertBefore(s,n);return[s]}function St(e){return new Array(e)}function ge(e){return e==null}const sf=335903614,uf=4150755663,of=1481765933>>>0,af=1284865837>>>0,cf=9007199254740992,lf=134217728;class Ro{constructor(t,n,r,s){return ge(n)&&ge(t)?(n=Math.random()*4294967295>>>0,t=0):ge(n)&&(n=t,t=0),ge(s)&&ge(r)?(s=this._state?this._state[3]:uf,r=this._state?this._state[2]:sf):ge(s)&&(s=r,r=0),this._state=new Int32Array([0,0,r>>>0,((s||0)|1)>>>0]),this._next(),Qi(this._state,this._state[0],this._state[1],t>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}_next(){const t=this._state[0]>>>0,n=this._state[1]>>>0;ff(this._state,t,n,of,af),Qi(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=t>>>18,s=(n>>>18|t<<14)>>>0;r=(r^t)>>>0,s=(s^n)>>>0;const i=(s>>>27|r<<5)>>>0,u=t>>>27,o=(-u>>>0&31)>>>0;return(i>>>u|i<<o)>>>0}integer(t){if(!t)return this._next();if(t=t>>>0,(t&t-1)===0)return this._next()&t-1;let n=0;const r=(-t>>>0)%t>>>0;for(n=this._next();n<r;n=this._next());return n%t}number(){const t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*lf+n)/cf}}function ff(e,t,n,r,s){let i=(n>>>16)*(s&65535)>>>0,u=(n&65535)*(s>>>16)>>>0,o=(n&65535)*(s&65535)>>>0,a=(n>>>16)*(s>>>16)+((u>>>16)+(i>>>16))>>>0;u=u<<16>>>0,o=o+u>>>0,o>>>0<u>>>0&&(a=a+1>>>0),i=i<<16>>>0,o=o+i>>>0,o>>>0<i>>>0&&(a=a+1>>>0),a=a+Math.imul(n,r)>>>0,a=a+Math.imul(t,s)>>>0,e[0]=a,e[1]=o}function Qi(e,t,n,r,s){let i=t+r>>>0;const u=n+s>>>0;u>>>0<n>>>0&&(i=i+1|0),e[0]=i,e[1]=u}function Ao(e){return e!==void 0}const hf=Mo,Ps=jt,C=Fo,df=No,g={sym:Symbol.for("tsplus/Hash")};function Mo(e){return typeof e=="object"&&e!==null&&g.sym in e}function jt(e){return e&3221225471|e>>>1&1073741824}function Fo(e){return jt(Oo(e))}function Lo(e){return jt(mf(e))}function k(e,t){return jt(Ds(e,t))}function cr(e){return jt(bf(e))}function H(e){return jt(zo(e))}function I(e){return jt(Dn(e))}function No(){return jt(qo())}function Vi(e){return e==null||e===!1}const pf=new Ro(Math.random()*4294967296>>>0),Kn=new WeakMap;function qo(){return pf.integer(2147483647)}function Oo(e){if(Vi(e)||typeof e.valueOf=="function"&&e.valueOf!==Object.prototype.valueOf&&(e=e.valueOf(),Vi(e)))return 0;switch(typeof e){case"number":return zo(e);case"string":return Dn(e);case"function":return yf(e);case"object":return gf(e);case"boolean":return e===!0?1:0;case"symbol":return Dn(String(e));case"bigint":return Dn(e.toString(10));case"undefined":return 0}}function mf(e){let t=6151;for(let n=0;n<e.length;n++)t=Ds(t,Oo(e[n]));return t}function Ds(e,t){return e*53^t}function gf(e){let t=Kn.get(e);return Ao(t)||(Mo(e)?t=e[g.sym]():t=No(),Kn.set(e,t)),t}function yf(e){let t=Kn.get(e);return Ao(t)||(t=qo(),Kn.set(e,t)),t}function bf(e){let t=6151,n;for(;!(n=e.next()).done;)t=Ds(t,Fo(n.value));return t}function zo(e){if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return e}function Dn(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return t}const _={sym:Symbol.for("tsplus/Equals")};function Xi(e){return hf(e)&&_.sym in e}function Zi(e,t){return e===t||e!==e&&t!==t}function F(e,t){if(e===t)return!0;if(Zi(C(e),C(t))){if(Xi(e))return e[_.sym](t);if(Xi(t))return t[_.sym](e)}else return!1;return Zi(e,t)}class ae{constructor(t){this.initial=t,this.current=t}get get(){return this.current}getAndSet(t){const n=this.current;return this.set(t),n}set(t){this.current=t}compareAndSet(t,n){return this.get===t?(this.set(n),!0):!1}}class ee extends ae{constructor(t){super(t),this.incrementAndGet=this.incrementAndGet.bind(this),this.decrementAndGet=this.decrementAndGet.bind(this)}incrementAndGet(){return this.set(this.get+1),this.get}decrementAndGet(){return this.set(this.get-1),this.get}getAndIncrement(){const t=this.get;return this.set(this.get+1),t}}class _f{}const Sf="IndexOutOfBounds";class Kt extends _f{constructor(t,n,r){super(),this.index=t,this.min=n,this.max=r,this._tag=Sf,this.message=`${this.index} is out of bounds (min ${this.min}, max ${this.max})`}}const wf="NoSuchElement";class Po{constructor(){this._tag=wf}}var Yi;const vf=Go,V=64,Qr=Symbol.for("@tsplus/collections/Chunk"),Ie=typeof Buffer<"u"?Buffer.alloc:e=>new Uint8Array(e);function Le(e){return typeof e=="number"&&Number.isInteger(e)&&e>=0&&e<=255}class ce{constructor(){this[Yi]=Qr}_arrayLike(){if(this.arrayLikeCache)return this.arrayLikeCache;const t=this.binary?Ie(this.length):St(this.length);return this._copyToArray(0,t),this.arrayLikeCache=t,t}_array(){if(this.arrayCache)return this.arrayCache;const t=St(this.length);return this._copyToArray(0,t),this.arrayCache=t,t}[(Yi=Qr,_.sym)](t){return Wo(t)&&Go(this,t,F)}[g.sym](){return cr(this[Symbol.iterator]())}toString(){return`Chunk(${this._array().join(", ")})`}toJSON(){return this._array()}_buckets(){return{[Symbol.iterator]:()=>this._arrayLikeIterator()}}_reverseBuckets(){return{[Symbol.iterator]:()=>this._reverseArrayLikeIterator()}}_reverse(){const t=this._arrayLike();return{[Symbol.iterator]:()=>{let n=t.length-1;return{next:()=>{if(n>=0&&n<t.length){const r=t[n];return n--,{value:r,done:!1}}return{value:t.length,done:!0}}}}}}_materialize(){switch(this._typeId){case ke:return this;case kn:return this;default:return Yt(this._arrayLike())}}_append(t){const n=this.binary&&Le(t),r=this.binary&&n?Ie(V):St(V);return r[0]=t,new nn(this,r,1,new ee(1),this.binary&&n)}_prepend(t){const n=this.binary&&Le(t),r=this.binary&&n?Ie(V):St(V);return r[V-1]=t,new rn(this,r,1,new ee(1),this.binary&&n)}_take(t){if(t<=0)return Y;if(t>=this.length)return this;switch(this._typeId){case ke:return Y;case Us:return t>=this.length?this:new Qn(this.chunk,this.offset,t);case Pe:return this;default:return new Qn(this,0,t)}}_concat(t){if(this._typeId===ke)return t;if(t._typeId===ke)return this;if(this._typeId===Do){const r=Yt(this.buffer)._take(this.bufferUsed);return this.start._concat(r)._concat(t)}if(t._typeId===Bo){const r=Yt(t.bufferUsed===0?[]:t.buffer.slice(-t.bufferUsed));return this._concat(r)._concat(t.end)}const n=t.depth-this.depth;if(Math.abs(n)<=1)return new Et(this,t);if(n<-1)if(this.left.depth>=this.right.depth){const r=this.right._concat(t);return new Et(this.left,r)}else{const r=this.right.right._concat(t);if(r.depth===this.depth-3){const s=new Et(this.right.left,r);return new Et(this.left,s)}else{const s=new Et(this.left,this.right.left);return new Et(s,r)}}else if(this.right.depth>=t.left.depth){const r=this._concat(t.left);return new Et(r,t.right)}else{const r=this._concat(t.left.left);if(r.depth===t.depth-3){const s=new Et(r,t.left.right);return new Et(s,t.right)}else{const s=new Et(t.left.right,t.right);return new Et(r,s)}}}}const ke=Symbol.for("@effect-ts/core/collection/immutable/Chunk/Empty");class kf extends ce{constructor(){super(),this.depth=0,this._typeId=ke,this.left=this,this.right=this,this.binary=!0,this.length=0}_get(t){throw new Kt(t,0,this.length-1)}_materialize(){return Yt([])}_copyToArray(t,n){}[Symbol.iterator](){return{next:()=>({value:0,done:!0})}}_arrayLikeIterator(){return{next:()=>({value:0,done:!0})}}_reverseArrayLikeIterator(){return{next:()=>({value:0,done:!0})}}}const Y=new kf,Do=Symbol.for("@effect-ts/core/collection/immutable/Chunk/AppendN");class nn extends ce{constructor(t,n,r,s,i){super(),this.start=t,this.buffer=n,this.bufferUsed=r,this.chain=s,this.binary=i,this._typeId=Do,this.depth=0,this.left=Y,this.right=Y,this.length=this.start.length+this.bufferUsed}_get(t){if(t<this.start.length)return this.start._get(t);const n=t-this.start.length;if(n>=this.buffer.length||n<0)throw new Kt(t,0,this.length-1);return this.buffer[n]}_append(t){const n=this.binary&&Le(t);if(this.bufferUsed<this.buffer.length&&this.chain.compareAndSet(this.bufferUsed,this.bufferUsed+1)){if(this.binary&&!n){const r=St(V);for(let s=0;s<V;s++)r[s]=this.buffer[s];return r[this.bufferUsed]=t,new nn(this.start,r,this.bufferUsed+1,this.chain,this.binary&&n)}return this.buffer[this.bufferUsed]=t,new nn(this.start,this.buffer,this.bufferUsed+1,this.chain,this.binary&&n)}else{const r=this.binary&&n?Ie(V):St(V);r[0]=t;const s=Yt(this.buffer)._take(this.bufferUsed);return new nn(this.start._concat(s),r,1,new ee(1),this.binary&&n)}}_copyToArray(t,n){this.start._copyToArray(t,n),lr(this.buffer,0,n,this.start.length+t,this.bufferUsed)}[Symbol.iterator](){return this._arrayLike()[Symbol.iterator]()}_arrayLikeIterator(){const t=this._arrayLike();let n=!1;return{next:()=>n?{value:1,done:!0}:(n=!0,{value:t,done:!1})}}_reverseArrayLikeIterator(){const t=this._arrayLike();let n=!1;return{next:()=>n?{value:1,done:!0}:(n=!0,{value:t,done:!1})}}}const kn=Symbol.for("@effect-ts/core/collection/immutable/Chunk/Arr");class Uo extends ce{constructor(){super(...arguments),this._typeId=kn}}class xf extends Uo{constructor(t){super(),this.array=t,this.depth=0,this.left=Y,this.right=Y,this.length=t.length}get binary(){return typeof this.isBytes<"u"?this.isBytes:(this.isBytes=this.array.every(Le),this.isBytes)}_get(t){if(t>=this.length||t<0)throw new Kt(t,0,this.length-1);return this.array[t]}_arrayLike(){if(!this.binary)return this.array;if(this.arrayLikeCache)return this.arrayLikeCache;const t=Ie(this.length);return this._copyToArray(0,t),this.arrayLikeCache=t,t}_array(){return this.array}_materialize(){return this}_copyToArray(t,n){lr(this.array,0,n,t,this.length)}[Symbol.iterator](){return this.array[Symbol.iterator]()}_arrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this.array,done:!1})}}_reverseArrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this.array,done:!1})}}}class Ef extends Uo{constructor(t){super(),this.array=t,this.depth=0,this.left=Y,this.right=Y,this.binary=!0,this.length=t.length}_arrayLike(){return this.array}_get(t){if(t>=this.length||t<0)throw new Kt(t,0,this.length-1);return this.array[t]}_materialize(){return this}_copyToArray(t,n){lr(this.array,0,n,t,this.length)}[Symbol.iterator](){return this.array[Symbol.iterator]()}_arrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this.array,done:!1})}}_reverseArrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this.array,done:!1})}}}const Us=Symbol.for("@effect-ts/core/collection/immutable/Chunk/Slice");class Qn extends ce{constructor(t,n,r){super(),this.chunk=t,this.offset=n,this.length=r,this.depth=0,this.left=Y,this.right=Y,this._typeId=Us,this.binary=this.chunk.binary}_get(t){return this.chunk._get(t+this.offset)}_copyToArray(t,n){let r=0,s=t;for(;r<this.length;)n[s]=this._get(r),r+=1,s+=1}[Symbol.iterator](){return this._arrayLike()[Symbol.iterator]()}_arrayLikeIterator(){const t=this._arrayLike();let n=!1;return{next:()=>n?{value:1,done:!0}:(n=!0,{value:t,done:!1})}}_reverseArrayLikeIterator(){const t=this._arrayLike();let n=!1;return{next:()=>n?{value:1,done:!0}:(n=!0,{value:t,done:!1})}}}const Pe=Symbol.for("@effect-ts/core/collection/immutable/Chunk/Singleton");class Bs extends ce{constructor(t){super(),this.a=t,this.depth=0,this.left=Y,this.right=Y,this.length=1,this._typeId=Pe,this.binary=Le(t)}_get(t){if(t===0)return this.a;throw new Kt(t,0,this.length-1)}_copyToArray(t,n){n[t]=this.a}[Symbol.iterator](){return this._arrayLike()[Symbol.iterator]()}_arrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this._arrayLike(),done:!1})}}_reverseArrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this._arrayLike(),done:!1})}}}const Bo=Symbol.for("@effect-ts/core/collection/immutable/Chunk/PrependN");class rn extends ce{constructor(t,n,r,s,i){super(),this.end=t,this.buffer=n,this.bufferUsed=r,this.chain=s,this.binary=i,this.depth=0,this.left=Y,this.right=Y,this._typeId=Bo,this.length=this.end.length+this.bufferUsed}_get(t){if(t<this.bufferUsed){const n=V-this.bufferUsed+t;if(n>=this.buffer.length||n<0)throw new Kt(t,0,this.length-1);return this.buffer[n]}return this.end._get(t-this.bufferUsed)}_copyToArray(t,n){const r=Math.min(this.bufferUsed,Math.max(n.length-t,0));lr(this.buffer,V-this.bufferUsed,n,t,r),this.end._copyToArray(t+r,n)}prepend(t){const n=this.binary&&Le(t);if(this.bufferUsed<this.buffer.length&&this.chain.compareAndSet(this.bufferUsed,this.bufferUsed+1)){if(this.binary&&!n){const r=St(V);for(let s=0;s<V;s++)r[s]=this.buffer[s];return r[V-this.bufferUsed-1]=t,new rn(this.end,r,this.bufferUsed+1,this.chain,!1)}return this.buffer[V-this.bufferUsed-1]=t,new rn(this.end,this.buffer,this.bufferUsed+1,this.chain,this.binary&&n)}else{const r=n?Ie(V):St(V);r[V-1]=t;const s=Yt("subarray"in this.buffer?this.buffer.subarray(this.buffer.length-this.bufferUsed):this.buffer.slice(this.buffer.length-this.bufferUsed));return new rn(s._concat(this.end),r,1,new ee(1),this.binary&&n)}}[Symbol.iterator](){return this._arrayLike()[Symbol.iterator]()}_arrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this._arrayLike(),done:!1})}}_reverseArrayLikeIterator(){let t=!1;return{next:()=>t?{value:1,done:!0}:(t=!0,{value:this._arrayLike(),done:!1})}}}function lr(e,t,n,r,s){for(let i=t;i<Math.min(e.length,t+s);i++)n[r+i-t]=e[i];return n}const Cf=Symbol.for("@effect-ts/core/collection/immutable/Chunk/Concat");class Et extends ce{constructor(t,n){super(),this.left=t,this.right=n,this._typeId=Cf,this.depth=1+Math.max(this.left.depth,this.right.depth),this.length=this.left.length+this.right.length,this.binary=this.left.binary&&this.right.binary}_get(t){return t<this.left.length?this.left._get(t):this.right._get(t-this.left.length)}_copyToArray(t,n){this.left._copyToArray(t,n),this.right._copyToArray(t+this.left.length,n)}[Symbol.iterator](){return this._arrayLike()[Symbol.iterator]()}_arrayLikeIterator(){let t=this.left._arrayLikeIterator(),n=0,r=t.next(),s=0;return{next:()=>{if(s++,n===0&&r.done){t=this.right._arrayLikeIterator();const i=t.next();return i.done?{value:s,done:!0}:(n++,r=t.next(),i)}else{if(r.done)return{value:s,done:!0};const i=r;return r=t.next(),i}}}}_reverseArrayLikeIterator(){let t=this.right._arrayLikeIterator(),n=0,r=t.next(),s=0;return{next:()=>{if(s++,n===0&&r.done){t=this.left._arrayLikeIterator();const i=t.next();return i.done?{value:s,done:!0}:(n++,r=t.next(),i)}else{if(r.done)return{value:s,done:!0};const i=r;return r=t.next(),i}}}}}function Wo(e){return typeof e=="object"&&e!=null&&Qr in e}function Yt(e){return Wo(e)?e:e instanceof Uint8Array?new Ef(e):new xf(Array.isArray(e)?e:Array.from(e))}function kt(e){return Yt(e)}function Go(e,t,n){if(e.length!==t.length)return!1;const r=e._arrayLikeIterator(),s=t._arrayLikeIterator();let i=0,u=0,o=!0,a=!1,c=0,l=0,f,d,y,w;for(;o&&!a;)i<c&&u<l?(n(f[i],d[u])||(o=!1),i++,u++):i===c&&(y=r.next())&&!y.done?(f=y.value,c=f.length,i=0):u===l&&(w=s.next())&&!w.done?(d=w.value,l=d.length,u=0):i===c&&u===l?a=!0:o=!1;return o}function fn(e){return e.length===0}var To;const Ho=Symbol.for("@effect/core/stream/Channel");class le{constructor(){this[To]=Ho}}To=Ho;class $f extends le{constructor(t,n){super(),this.left=t,this.right=n,this._tag="PipeTo"}}class If extends le{constructor(t,n){super(),this.more=t,this.done=n,this._tag="Read"}}class jo extends le{constructor(t){super(),this.terminal=t,this._tag="SucceedNow"}}class Ws extends le{constructor(t){super(),this.error=t,this._tag="Fail"}}class Ko extends le{constructor(t){super(),this.out=t,this._tag="Emit"}}class Rf extends le{constructor(t){super(),this.effect=t,this._tag="Succeed"}}class Af extends le{constructor(t,n){super(),this.value=t,this.k=n,this._tag="Fold"}}class Qo{}class Vo extends Qo{constructor(t,n){super(),this.onSuccess=t,this.onHalt=n,this._tag="ContinuationK"}onExit(t){switch(t._tag){case"Failure":return this.onHalt(t.cause);case"Success":return this.onSuccess(t.value)}}}class Mf extends Qo{constructor(t){super(),this.finalizer=t,this._tag="ContinuationFinalizer"}}function Gs(e){return new Rf(e)}function ne(e){return new Ws(e)}function Xo(e,t){return new Af(e,new Vo(t,n=>ne(()=>n)))}function Vr(e,t){return Xo(e,t)}const Ff=Gs(()=>{}),Lf=Ff;function Vn(e){return new Ko(e)}const Zo=Symbol.for("@effect/core/stream/Stream");var Yo;class Jo{constructor(t){this.channel=t,this[Yo]=Zo}}Yo=Zo;function Nf(e,t){return new Jo(Xo(Gs(e),n=>fn(n)?Lf:Vn(()=>n)))}function qf(e,t){return Nf(()=>kt(e()))}function Of(...e){return qf(()=>e)}function O(){return Y}function ot(e,t){return e._append(t)}function De(e,t){if(e._typeId===Pe)return new Bs(t(e.a));let n=O();for(const r of e)n=ot(n,t(r));return n}class J{constructor(t,n){this.value=t,this.previous=n}}function At(e){let t,n,r=e;for(;r!=null;)switch(r._tag){case"FlatMap":{switch(r.value._tag){case"Succeed":{r=r.cont(r.value.a());break}default:t=new J(r.cont,t),r=r.value}break}case"Suspend":{r=r.f();break}case"Succeed":{n=r.a(),t?(r=t.value(n),t=t.previous):r=void 0;break}}return n}var ta,ea,na;const Ue=Symbol.for("@tsplus/stdlib/io/Eval");class ra{constructor(t){this.a=t,this._tag="Succeed",this[ta]=Ue}}ta=Ue;class zf{constructor(t){this.f=t,this._tag="Suspend",this[ea]=Ue}}ea=Ue;class Pf{constructor(t,n){this.value=t,this.cont=n,this._tag="FlatMap",this[na]=Ue}}na=Ue;function P(e){return new ra(e)}function Z(e){return new zf(e)}function fr(e,t){return new Pf(e,t)}function sa(e,t){return fr(e,n=>P(()=>t(n)))}function hn(e,t,n){return fr(e,r=>sa(t(),s=>n(r,s)))}class Df{constructor(t){this.io=t}*[Symbol.iterator](){return yield this}}function Uf(e){return new Df(e)}function ia(e,t){return e.done?P(()=>e.value):fr(e.value.io,n=>{const r=t.next(n);return ia(r,t)})}function Pt(e){return Z(()=>{const t=e(Uf),n=t.next();return ia(n,t)})}function Bf(){return!1}function Un(){}function rt(e){return e}const Xr=Symbol.for("@tsplus/stdlib/collection/HashMap");function Wf(e){return typeof e=="object"&&e!=null&&Xr in e}const Gf=I("Maybe/None"),Tf=I("Maybe/Some");class Ts{constructor(){this._tag="None"}[_.sym](t){return t instanceof Ts}[g.sym](){return Gf}}class Hs{constructor(t){this.value=t,this._tag="Some"}[_.sym](t){return t instanceof Hs&&F(this.value,t.value)}[g.sym](){return k(Tf,C(this.value))}}const Hf=new Ts,E=Hf;function A(e){return new Hs(e)}function ft(e){return e._tag==="None"}function st(e){return e._tag==="Some"}var Ji;const Zr=Symbol.for("tsplus/Tuple");class jf{constructor(t){this.tuple=t,this[Ji]=Zr}[(Ji=Zr,Symbol.iterator)](){return this.tuple[Symbol.iterator]()}[g.sym](){return Lo(this.tuple)}[_.sym](t){return Kf(t)?this.tuple.length===t.tuple.length&&this.tuple.every((n,r)=>F(n,t.tuple[r])):!1}get(t){return this.tuple[t]}}function Kf(e){return typeof e=="object"&&e!=null&&Zr in e}function b(...e){return new jf(e)}const Ne=5,js=Math.pow(2,Ne),Qf=js-1,Vf=js/2,Xf=js/4;function Zf(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function qe(e,t){return t>>>e&Qf}function xe(e){return 1<<e}function ua(e,t){return Zf(e&t-1)}function Re(e,t,n,r){let s=r;if(!e){const i=r.length;s=St(i);for(let u=0;u<i;++u)s[u]=r[u]}return s[t]=n,s}function oa(e,t,n){const r=n.length-1;let s=0,i=0,u=n;if(e)s=i=t;else for(u=St(r);s<t;)u[i++]=n[s++];for(++s;s<=r;)u[i++]=n[s++];return e&&(u.length=r),u}function Yf(e,t,n,r){const s=r.length;if(e){let a=s;for(;a>=t;)r[a--]=r[a];return r[t]=n,r}let i=0,u=0;const o=St(s+1);for(;i<t;)o[u++]=r[i++];for(o[t]=n;i<s;)o[++u]=r[i++];return o}class Dt{constructor(){this._tag="EmptyNode"}modify(t,n,r,s,i,u){const o=r(E);return ft(o)?new Dt:(++u.value,new Jt(t,s,i,o))}}function $t(e){return e instanceof Dt}function Jf(e){return $t(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function hr(e,t){return $t(e)?!1:t===e.edit}class Jt{constructor(t,n,r,s){this.edit=t,this.hash=n,this.key=r,this.value=s,this._tag="LeafNode"}modify(t,n,r,s,i,u){if(F(i,this.key)){const a=r(this.value);return a===this.value?this:ft(a)?(--u.value,new Dt):hr(this,t)?(this.value=a,this):new Jt(t,s,i,a)}const o=r(E);return ft(o)?this:(++u.value,aa(t,n,this.hash,this,s,new Jt(t,s,i,o)))}}class Ks{constructor(t,n,r){this.edit=t,this.hash=n,this.children=r,this._tag="CollisionNode"}modify(t,n,r,s,i,u){if(s===this.hash){const a=hr(this,t),c=this.updateCollisionList(a,t,this.hash,this.children,r,i,u);return c===this.children?this:c.length>1?new Ks(t,this.hash,c):c[0]}const o=r(E);return ft(o)?this:(++u.value,aa(t,n,this.hash,this,s,new Jt(t,s,i,o)))}updateCollisionList(t,n,r,s,i,u,o){const a=s.length;for(let l=0;l<a;++l){const f=s[l];if("key"in f&&F(u,f.key)){const d=f.value,y=i(d);return y===d?s:ft(y)?(--o.value,oa(t,l,s)):Re(t,l,new Jt(n,r,u,y),s)}}const c=i(E);return ft(c)?s:(++o.value,Re(t,a,new Jt(n,r,u,c),s))}}class dn{constructor(t,n,r){this.edit=t,this.mask=n,this.children=r,this._tag="IndexedNode"}modify(t,n,r,s,i,u){const o=this.mask,a=this.children,c=qe(n,s),l=xe(c),f=ua(o,l),d=o&l,y=d?a[f]:new Dt,w=y.modify(t,n+Ne,r,s,i,u);if(y===w)return this;const M=hr(this,t);let N=o,G;if(d&&$t(w)){if(N&=~l,!N)return new Dt;if(a.length<=2&&Jf(a[f^1]))return a[f^1];G=oa(M,f,a)}else if(!d&&!$t(w)){if(a.length>=Vf)return eh(t,c,w,o,a);N|=l,G=Yf(M,f,w,a)}else G=Re(M,f,w,a);return M?(this.mask=N,this.children=G,this):new dn(t,N,G)}}class Qs{constructor(t,n,r){this.edit=t,this.size=n,this.children=r,this._tag="ArrayNode"}modify(t,n,r,s,i,u){let o=this.size;const a=this.children,c=qe(n,s),l=a[c],f=(l||new Dt).modify(t,n+Ne,r,s,i,u);if(l===f)return this;const d=hr(this,t);let y;if($t(l)&&!$t(f))++o,y=Re(d,c,f,a);else if(!$t(l)&&$t(f)){if(--o,o<=Xf)return th(t,o,c,a);y=Re(d,c,new Dt,a)}else y=Re(d,c,f,a);return d?(this.size=o,this.children=y,this):new Qs(t,o,y)}}function th(e,t,n,r){const s=St(t-1);let i=0,u=0;for(let o=0,a=r.length;o<a;++o)if(o!==n){const c=r[o];c&&!$t(c)&&(s[i++]=c,u|=1<<o)}return new dn(e,u,s)}function eh(e,t,n,r,s){const i=[];let u=r,o=0;for(let a=0;u;++a)u&1&&(i[a]=s[o++]),u>>>=1;return i[t]=n,new Qs(e,o+1,i)}function nh(e,t,n,r,s,i){if(n===s)return new Ks(e,n,[i,r]);const u=qe(t,n),o=qe(t,s);if(u===o)return a=>new dn(e,xe(u)|xe(o),[a]);{const a=u<o?[r,i]:[i,r];return new dn(e,xe(u)|xe(o),a)}}function aa(e,t,n,r,s,i){let u,o=t;for(;;){const a=nh(e,o,n,r,s,i);if(typeof a=="function")u=new J(a,u),o=o+Ne;else{let c=a;for(;u!=null;)c=u.value(c),u=u.previous;return c}}}var tu;class Vs{constructor(t,n,r,s){this._editable=t,this._edit=n,this._root=r,this._size=s,this[tu]=Xr}[(tu=Xr,Symbol.iterator)](){return new dr(this,rt)}[g.sym](){let t=I("HashMap");for(const n of this)t^=k(C(n.get(0)),C(n.get(1)));return Ps(t)}[_.sym](t){if(Wf(t)){if(t._size!==this._size)return!1;for(const n of this){const r=fa(t,n.get(0),C(n.get(0)));if(ft(r))return!1;if(!F(n.get(1),r.value))return!1}return!0}return!1}}class dr{constructor(t,n){this.map=t,this.f=n,this.v=ca(this.map._root,this.f,void 0)}next(){if(ft(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=Xn(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new dr(this.map,this.f)}}function Xn(e){return e?la(e[0],e[1],e[2],e[3],e[4]):E}function ca(e,t,n=void 0){switch(e._tag){case"LeafNode":return st(e.value)?A({value:t(b(e.key,e.value.value)),cont:n}):Xn(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return la(r.length,r,0,t,n)}default:return Xn(n)}}function la(e,t,n,r,s){for(;n<e;){const i=t[n++];if(i&&!$t(i))return ca(i,r,[e,t,n,r,s])}return Xn(s)}function fa(e,t,n){let r=e._root,s=0;for(;;)switch(r._tag){case"LeafNode":return F(t,r.key)?r.value:E;case"CollisionNode":{if(n===r.hash){const i=r.children;for(let u=0,o=i.length;u<o;++u){const a=i[u];if("key"in a&&F(t,a.key))return a.value}}return E}case"IndexedNode":{const i=qe(s,n),u=xe(i);if(r.mask&u){r=r.children[ua(r.mask,u)],s+=Ne;break}return E}case"ArrayNode":{if(r=r.children[qe(s,n)],r){s+=Ne;break}return E}default:return E}}function ha(e,t){return st(fa(e,t,C(t)))}function da(e,t){return F(e,t)}function pn(e){return e._size}function rh(e){return new dr(e,({tuple:[t]})=>t)}const Yr=Symbol.for("@tsplus/stdlib/collections/HashSet");function sh(e){return typeof e=="object"&&e!=null&&Yr in e}var eu;class Xs{constructor(t){this._keyMap=t,this[eu]=Yr}[(eu=Yr,Symbol.iterator)](){return rh(this._keyMap)}[g.sym](){return k(I("HashSet"),C(this._keyMap))}[_.sym](t){return sh(t)?pn(this._keyMap)===pn(t._keyMap)&&da(this._keyMap,t._keyMap):!1}}function pa(e,t){if(e===t)return!0;if(pn(e._keyMap)!==pn(t._keyMap))return!1;let n=!0;for(const r of e)if(!ha(t._keyMap,r)){n=!1;break}return n}var nu,ru,su;const re=Symbol.for("@effect/core/io/FiberId");class ih{constructor(){this._tag="None",this[nu]=re}[(nu=re,g.sym)](){return I(this._tag)}[_.sym](t){return Zs(t)?t._tag==="None":!1}}class uh{constructor(t,n,r){this.id=t,this.startTimeSeconds=n,this.location=r,this._tag="Runtime",this[ru]=re}[(ru=re,g.sym)](){return k(I(this._tag),k(H(this.id),k(H(this.startTimeSeconds),C(this.location))))}[_.sym](t){return Zs(t)&&this[g.sym]()===t[g.sym]()}}class Nn{constructor(t){this.fiberIds=t,this._tag="Composite",this[su]=re}[(su=re,g.sym)](){return k(I(this._tag),C(this.fiberIds))}[_.sym](t){return Zs(t)?t._tag==="Composite"&&pa(this.fiberIds,t.fiberIds):!1}}function Zs(e){return typeof e=="object"&&e!=null&&re in e}const Be=new ih;class ma{constructor(t,n){this.fiberId=t,this.stackTrace=n}}function ga(e,t){return new ma(e,t)}const Ht=ga(Be,O());var iu,uu;const z=ya,ct=Jr,Zn=Symbol.for("@tsplus/collections/List");class Ys{constructor(t,n){this.head=t,this.tail=n,this._tag="Cons",this[iu]=Zn}[(iu=Zn,Symbol.iterator)](){let t=!1,n=this;return{next(){if(t)return this.return();if(n._tag==="Nil")return t=!0,this.return();const r=n.head;return n=n.tail,{done:t,value:r}},return(r){return t||(t=!0),{done:!0,value:r}}}}[g.sym](){return cr(this[Symbol.iterator]())}[_.sym](t){return t instanceof Ys&&ah(this,t,F)}}class Js{constructor(){this._tag="Nil",this[uu]=Zn}[(uu=Zn,Symbol.iterator)](){return{next(){return{done:!0,value:void 0}}}}[g.sym](){return cr(this[Symbol.iterator]())}[_.sym](t){return t instanceof Js}}const oh=new Js;function j(){return oh}function K(e,t){return new Ys(e,t)}function ya(e){return e._tag==="Nil"}function Jr(e){let t=e,n=0;for(;!ya(t);)n+=1,t=t.tail;return n}function ah(e,t,n){if(e===t)return!0;if(Jr(e)!==Jr(t))return!1;{const r=e[Symbol.iterator](),s=t[Symbol.iterator]();let i,u;for(;!(i=r.next()).done&&!(u=s.next()).done;)if(!n(i.value,u.value))return!1;return!0}}function pt(e){if(!z(e))return e.head}function Ct(e){if(!z(e))return e.tail}function tt(e,t){return K(t,e)}function ch(e,t,n){return e._editable?(e._root=t,e._size=n,e):t===e._root?e:new Vs(e._editable,e._edit,t,n)}function lh(e,t,n,r){const s={value:e._size},i=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,s);return ch(e,i,s.value)}function fh(e,t,n){return lh(e,t,C(t),n)}function ts(e,t,n){return fh(e,t,()=>A(n))}function ht(e,t){return e._keyMap._editable?(ts(e._keyMap,t,!0),e):new Xs(ts(e._keyMap,t,!0))}function T(){return j()}function ba(){return new Vs(!1,0,new Dt,0)}function U(){return new Xs(ba())}function _a(e){return new Vs(!0,e._edit+1,e._root,e._size)}function ti(e){return new Xs(_a(e._keyMap))}function ei(e){return e._keyMap._editable=!1,e}function ni(...e){const t=ti(U());for(const n of e)ht(t,n);return ei(t)}const hh=$t;function Sa(e,t,n){const r=e._root;if(r._tag==="LeafNode")return st(r.value)?n(t,r.key,r.value.value):t;if(r._tag==="EmptyNode")return t;const s=[r.children];let i;for(;i=s.pop();)for(let u=0,o=i.length;u<o;){const a=i[u++];a&&!hh(a)&&(a._tag==="LeafNode"?st(a.value)&&(t=n(t,a.key,a.value.value)):s.push(a.children))}return t}function dh(e,t){Sa(e,void 0,(n,r,s)=>t(r,s))}function mn(e,t){dh(e._keyMap,n=>{t(n)})}function ri(e,t){const n=ti(e);return t(n),ei(n)}function pr(e,t){const n=U();return ri(n,r=>{mn(e,s=>{ht(r,s)});for(const s of t)ht(r,s)})}function wa(e,t){if(z(e))return t;if(z(t))return e;{const n=K(t.head,e);let r=n,s=t.tail;for(;!z(s);){const i=K(s.head,e);r.tail=i,r=i,s=s.tail}return n}}function va(e,t){return wa(t,e)}function Yn(e,t,n){let r=t,s=e;for(;!z(s);)r=n(r,s.head),s=s.tail;return r}function mr(e){return pn(e._keyMap)}function Oe(e){let t=T(),n=e;for(;!z(n);)t=tt(t,n.head),n=n.tail;return t}const si=ka;function ka(e){const t=e[Symbol.iterator]();let n;if((n=t.next()).done)return j();{const r=K(n.value,j());let s=r;for(;!(n=t.next()).done;){const i=K(n.value,j());s.tail=i,s=i}return r}}function We(...e){return ka(e)}function xa(e){return new ra(()=>e)}var ou,au,cu,lu,fu,hu,du;const ph=gn,at=Symbol.for("@effect/core/io/Cause");function Ee(e){return e._tag==="Empty"}function ii(e){return e._tag==="Die"}function Ea(e){return e._tag==="Fail"}function ui(e){return e._tag==="Interrupt"}function mh(e){return e._tag==="Stackless"}function X(e){return e._tag==="Then"}function it(e){return e._tag==="Both"}class gh{constructor(){this._tag="Empty",this[ou]=at}[(ou=at,g.sym)](){return Ra}[_.sym](t){return fe(t)&&At(this.__equalsSafe(t))}__equalsSafe(t){switch(t._tag){case"Empty":return P(()=>!0);case"Both":case"Then":return hn(Z(()=>this.__equalsSafe(t.left)),()=>Z(()=>this.__equalsSafe(t.right)),(n,r)=>n&&r);case"Stackless":return Z(()=>this.__equalsSafe(t.cause));default:return P(()=>!1)}}}class Ca{constructor(t,n){this.value=t,this.trace=n,this._tag="Fail",this[au]=at}[(au=at,g.sym)](){return k(I(this._tag),C(this.value))}[_.sym](t){return fe(t)&&At(this.__equalsSafe(t))}__equalsSafe(t){switch(t._tag){case"Fail":return P(()=>F(this.value,t.value));case"Both":case"Then":return Z(()=>zt(xn)(this,t));case"Stackless":return Z(()=>this.__equalsSafe(t.cause));default:return P(()=>!1)}}}class oi{constructor(t,n){this.value=t,this.trace=n,this._tag="Die",this[cu]=at}[(cu=at,g.sym)](){return k(I(this._tag),C(this.value))}[_.sym](t){return fe(t)&&At(this.__equalsSafe(t))}__equalsSafe(t){switch(t._tag){case"Die":return P(()=>F(this.value,t.value));case"Both":case"Then":return Z(()=>zt(xn)(this,t));case"Stackless":return Z(()=>this.__equalsSafe(t.cause));default:return P(()=>!1)}}}class ai{constructor(t,n){this.fiberId=t,this.trace=n,this._tag="Interrupt",this[lu]=at}[(lu=at,g.sym)](){return k(I(this._tag),C(this.fiberId))}[_.sym](t){return fe(t)&&At(this.__equalsSafe(t))}__equalsSafe(t){switch(t._tag){case"Interrupt":return P(()=>F(this.fiberId,t.fiberId));case"Both":case"Then":return Z(()=>zt(xn)(this,t));case"Stackless":return Z(()=>this.__equalsSafe(t.cause));default:return P(()=>!1)}}}class ci{constructor(t,n){this.cause=t,this.stackless=n,this._tag="Stackless",this[fu]=at}[(fu=at,g.sym)](){return this.cause[g.sym]()}[_.sym](t){return fe(t)&&At(this.__equalsSafe(t))}__equalsSafe(t){return t._tag==="Stackless"?this.cause.__equalsSafe(t.cause):this.cause.__equalsSafe(t)}}class Wt{constructor(t,n){this.left=t,this.right=n,this._tag="Then",this[hu]=at}[(hu=at,g.sym)](){return Aa(this)}[_.sym](t){return fe(t)&&At(this.__equalsSafe(t))}__equalsSafe(t){const n=this;return Pt(function*(r){return t._tag==="Stackless"?yield*r(n.__equalsSafe(t.cause)):(yield*r(n.eq(t)))||(yield*r(zt(vh)(n,t)))||(yield*r(zt(kh)(n,t)))||(yield*r(zt(xn)(n,t)))})}eq(t){const n=this;return t._tag==="Then"?Pt(function*(r){return(yield*r(n.left.__equalsSafe(t.left)))&&(yield*r(n.right.__equalsSafe(t.right)))}):P(()=>!1)}}class gr{constructor(t,n){this.left=t,this.right=n,this._tag="Both",this[du]=at}[(du=at,g.sym)](){return Aa(this)}[_.sym](t){return fe(t)&&At(this.__equalsSafe(t))}__equalsSafe(t){const n=this;return Pt(function*(r){return t._tag==="Stackless"?yield*r(n.__equalsSafe(t.cause)):(yield*r(n.eq(t)))||(yield*r(zt(xh)(n,t)))||(yield*r(zt(Eh)(n,t)))||(yield*r(Ch(n,t)))||(yield*r(zt(xn)(n,t)))})}eq(t){const n=this;return t._tag==="Both"?Pt(function*(r){return(yield*r(n.left.__equalsSafe(t.left)))&&(yield*r(n.right.__equalsSafe(t.right)))}):P(()=>!1)}}const Ot=new gh;function yr(e,t=Ht){return new oi(e,t)}function $a(e,t=Ht){return new Ca(e,t)}function li(e,t=Ht){return new ai(e,t)}function yh(e){return new ci(e,!0)}function Nt(e,t){return gn(e)?t:gn(t)?e:new Wt(e,t)}function Ia(e,t){return gn(e)?t:gn(t)?e:new gr(e,t)}function fe(e){return typeof e=="object"&&e!=null&&at in e}function gn(e){if(Ee(e)||mh(e)&&Ee(e.cause))return!0;let t,n=e;for(;n;){switch(n._tag){case"Die":return!1;case"Fail":return!1;case"Interrupt":return!1;case"Then":{t=new J(n.right,t),n=n.left;break}case"Both":{t=new J(n.right,t),n=n.left;break}case"Stackless":{n=n.cause;break}default:n=void 0}!n&&t&&(n=t.value,t=t.previous)}return!0}const Ra=Ps(df());function bh(e,t,n,r){for(;;)switch(e._tag){case"Empty":{if(ct(t)===0)return b(n,r);{e=pt(t);const s=Ct(t);t=s??j()}break}case"Then":{const s=e.left,i=e.right;switch(s._tag){case"Empty":{e=e.right;break}case"Then":{e=new Wt(s.left,new Wt(s.right,i));break}case"Both":{e=new gr(new Wt(s.left,i),new Wt(s.right,i));break}case"Stackless":{e=new Wt(s.cause,i);break}default:e=s,r=tt(r,i)}break}case"Both":{t=tt(t,e.right),e=e.left;break}case"Stackless":{e=e.cause;break}default:{if(ct(t)===0)return b(ht(n,e),r);{n=ht(n,e),e=pt(t);const s=Ct(t);t=s??j();break}}}throw new Error("Bug")}function _h(e){return bh(e,T(),ni(),T())}function Sh(e,t){for(;;){const{tuple:[n,r]}=Yn(e,b(U(),T()),({tuple:[i,u]},o)=>{const{tuple:[a,c]}=_h(o);return b(pr(i,a),va(u,c))}),s=mr(n)>0?tt(t,n):t;if(ct(r)===0)return Oe(s);e=r,t=s}throw new Error("Bug")}function wh(e){return Sh(We(e),T())}function Aa(e){const t=wh(e),n=ct(t);let r;return n===0?Ra:n===1&&(r=pt(t))&&mr(r)===1?pt(si(r))[g.sym]():t[g.sym]()}function zt(e){return(t,n)=>hn(e(t,n),()=>e(n,t),(r,s)=>r||s)}function xn(e,t){return X(e)&&Ee(e.right)?e.left.__equalsSafe(t):X(e)&&Ee(e.left)?e.right.__equalsSafe(t):it(e)&&Ee(e.right)?e.left.__equalsSafe(t):it(e)&&Ee(e.left)?e.right.__equalsSafe(t):xa(!1)}function vh(e,t){return Pt(function*(n){if(X(e)&&X(e.left)&&X(t)&&X(t.right)){const r=e.left.left,s=e.left.right,i=e.right,u=t.left,o=t.right.left,a=t.right.right;return(yield*n(r.__equalsSafe(u)))&&(yield*n(s.__equalsSafe(o)))&&(yield*n(i.__equalsSafe(a)))}return!1})}function kh(e,t){return Pt(function*(n){if(X(e)&&it(e.right)&&it(t)&&X(t.left)&&X(t.right)){const r=e.left,s=e.right.left,i=e.right.right,u=t.left.left,o=t.left.right,a=t.right.left,c=t.right.right;if((yield*n(u.__equalsSafe(a)))&&(yield*n(r.__equalsSafe(u)))&&(yield*n(s.__equalsSafe(o)))&&(yield*n(i.__equalsSafe(c))))return!0}if(X(e)&&it(e.left)&&it(t)&&X(t.left)&&X(t.right)){const r=e.left.left,s=e.left.right,i=e.right,u=t.left.left,o=t.left.right,a=t.right.left,c=t.right.right;if((yield*n(o.__equalsSafe(c)))&&(yield*n(r.__equalsSafe(u)))&&(yield*n(s.__equalsSafe(a)))&&(yield*n(i.__equalsSafe(o))))return!0}return!1})}function xh(e,t){return Pt(function*(n){if(it(e)&&it(e.left)&&it(t)&&it(t.right)){const r=e.left.left,s=e.left.right,i=e.right,u=t.left,o=t.right.left,a=t.right.right;return(yield*n(r.__equalsSafe(u)))&&(yield*n(s.__equalsSafe(o)))&&(yield*n(i.__equalsSafe(a)))}return!1})}function Eh(e,t){return Pt(function*(n){if(it(e)&&X(e.left)&&X(e.right)&&X(t)&&it(t.right)){const r=e.left.left,s=e.left.right,i=e.right.left,u=e.right.right,o=t.left,a=t.right.left,c=t.right.right;if((yield*n(r.__equalsSafe(i)))&&(yield*n(r.__equalsSafe(o)))&&(yield*n(s.__equalsSafe(a)))&&(yield*n(u.__equalsSafe(c))))return!0}if(it(e)&&X(e.left)&&X(e.right)&&X(t)&&it(t.left)){const r=e.left.left,s=e.left.right,i=e.right.left,u=e.right.right,o=t.left.left,a=t.left.right,c=t.right;if((yield*n(s.__equalsSafe(u)))&&(yield*n(r.__equalsSafe(o)))&&(yield*n(i.__equalsSafe(a)))&&(yield*n(s.__equalsSafe(c))))return!0}return!1})}function Ch(e,t){return Pt(function*(n){return it(t)?(yield*n(e.left.__equalsSafe(t.right)))&&(yield*n(e.right.__equalsSafe(t.left))):!1})}function Ma(e){return new Ws(()=>$a(e()))}function Jn(e){return new jo(e)}const $h=I("Either/Left"),Ih=I("Either/Right");class fi{constructor(t){this.left=t,this._tag="Left"}[_.sym](t){return t instanceof fi&&F(this.left,t.left)}[g.sym](){return k($h,C(this.left))}}class hi{constructor(t){this.right=t,this._tag="Right"}[_.sym](t){return t instanceof hi&&F(this.right,t.right)}[g.sym](){return k(Ih,C(this.right))}}function di(e){return e._tag==="Left"}function he(e){return new hi(e)}function Ge(e){return new fi(e)}function pi(e,t){return At(Bn(e,t))}function Bn(e,t){const n=t(e);if(n._tag==="Some")return P(()=>n);switch(e._tag){case"Both":case"Then":return fr(Z(()=>Bn(e.left,t)),r=>r._tag==="Some"?xa(r):Bn(e.right,t));case"Stackless":return Z(()=>Bn(e.cause,t));default:return P(()=>n)}}function Fa(e){return pi(e,t=>Ea(t)?A(t.value):E)}function vt(e,t,n){return ft(e)?t():n(e.value)}function La(e){return vt(Fa(e),()=>he(e),Ge)}function sn(e,t,n){return di(e)?t(e.left):n(e.right)}function br(e,t,n){return new If(e,new Vo(n,t))}function Na(e,t,n){return br(e,r=>sn(La(r),t,s=>ne(()=>s)),n)}function un(e,t){return new $f(()=>e,t)}function Rh(e,t){const n=Na(r=>Vr(Vn(()=>t(r)),()=>n),r=>Ma(()=>r),r=>Jn(r));return un(e,()=>n)}function Ah(e,t,n){return new Jo(Rh(e.channel,r=>De(r,t)))}function Ae(e,t){return e._concat(t)}const qa=Symbol.for("@effect/core/stream/Sink");var Oa;class Mh{constructor(t){this.channel=t,this[Oa]=qa}}Oa=qa;function Fh(e){return new Mh(za(O()))}function za(e){return br(t=>za(Ae(e,t)),t=>ne(()=>t),()=>Gs(()=>e))}var Pa,Da,Ua,Ba;const Lh=Symbol.for("@effect/core/Cause/errors/Runtime");class Nh{constructor(t){this.message=t,this[Pa]="RuntimeError"}}Pa=Lh;const mi=Symbol.for("@effect/core/Cause/errors/Channel");class qh{constructor(t){this.error=t,this[Da]=mi}}Da=mi;function Oh(e){return typeof e=="object"&&e!=null&&mi in e}const Wa=Symbol.for("@effect/core/Cause/errors/Interrupted");class es extends Error{constructor(t){super(t),this[Ua]="InterruptedException",this.name=this[Wa]}}Ua=Wa;const Ga=Symbol.for("@effect/core/Cause/errors/IllegalState");class zh extends Error{constructor(t){super(t),this[Ba]="IllegalStateException",this.name=this[Ga]}}Ba=Ga;function Ph(e,t){const n=Na(s=>Vr(Vn(()=>s),()=>n),s=>ne(()=>yr(new qh(s))),s=>Jn(s)),r=br(s=>Vr(Vn(()=>s),()=>r),s=>ii(s)&&Oh(s.value)?Ma(()=>s.value.error):ne(()=>s),s=>Jn(s));return un(un(un(e,()=>n),()=>t()),()=>r)}function Dh(e){const t=br(()=>t,n=>ne(()=>n),Jn);return un(e,()=>t)}const Uh={$:{},Error:class extends Error{constructor(t,n){super(),this.exit=t,this.trace=n,this._tag="EffectError"}}};class Q{}class Bh extends Q{constructor(t,n,r){super(),this.effect=t,this.k=n,this.trace=r,this._tag="FlatMap"}apply(t){return this.k(t)}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Wh extends Q{constructor(t,n){super(),this.value=t,this.trace=n,this._tag="SucceedNow"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Gh extends Q{constructor(t,n){super(),this.effect=t,this.trace=n,this._tag="Succeed"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Th extends Q{constructor(t,n){super(),this.make=t,this.trace=n,this._tag="Suspend"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Hh extends Q{constructor(t,n){super(),this.make=t,this.trace=n,this._tag="SuspendWith"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Ta extends Q{constructor(t,n,r){super(),this.register=t,this.blockingOn=n,this.trace=r,this._tag="Async"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Ha extends Q{constructor(t,n,r,s){super(),this.effect=t,this.failure=n,this.success=r,this.trace=s,this._tag="Fold"}apply(t){return this.success(t)}unsafeLog(){return`${this._tag} at ${this.trace}`}}class ja extends Q{constructor(t,n,r){super(),this.effect=t,this.scope=n,this.trace=r,this._tag="Fork"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class jh extends Q{constructor(t,n,r){super(),this.effect=t,this.flag=n,this.trace=r,this._tag="InterruptStatus"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Kh extends Q{constructor(t,n){super(),this.k=t,this.trace=n,this._tag="CheckInterrupt"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Ka extends Q{constructor(t,n){super(),this.cause=t,this.trace=n,this._tag="Fail"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Qh extends Q{constructor(t,n){super(),this.f=t,this.trace=n,this._tag="Descriptor"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Vh extends Q{constructor(t,n){super(),this.f=t,this.trace=n,this._tag="FiberRefModifyAll"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Xh extends Q{constructor(t,n,r){super(),this.fiberRef=t,this.f=n,this.trace=r,this._tag="FiberRefModify"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Zh extends Q{constructor(t,n,r,s){super(),this.localValue=t,this.fiberRef=n,this.effect=r,this.trace=s,this._tag="FiberRefLocally"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Yh extends Q{constructor(t,n,r){super(),this.fiberRef=t,this.f=n,this.trace=r,this._tag="FiberRefWith"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class Jh extends Q{constructor(t,n){super(),this.f=t,this.trace=n,this._tag="GetForkScope"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class td extends Q{constructor(t,n,r){super(),this.effect=t,this.forkScope=n,this.trace=r,this._tag="OverrideForkScope"}unsafeLog(){return`${this._tag} at ${this.trace}`}}class ed extends Q{constructor(t,n,r){super(),this.effect=t,this.finalizer=n,this.trace=r,this._tag="Ensuring"}unsafeLog(){return`${this._tag} at ${this.trace}`}}function v(e,t){return new Th(e,t)}function p(e,t){return new Gh(e,t)}function q(e,t){return new Wh(e,t)}function m(e,t,n){return new Bh(e,t,n)}function L(e,t,n){return m(e,t,n)}const nd="(@effect/core) _src/io/Effect/operations/unit.ts",Qa=q(void 0,nd+":6:66"),$=Qa;function yn(e,t){return L(e,()=>Qa,t)}function rd(e,t){const n=new Map(this.unsafeMap);return n.set(e,t),new xt(n)}function pu(e){if(!this.unsafeMap.has(e))throw new Po;return this.unsafeMap.get(e)}function sd(e){return this.unsafeMap.has(e)?A(this.unsafeMap.get(e)):E}function id(e){const t=new Map(this.unsafeMap);for(const[n,r]of e.unsafeMap)t.set(n,r);return new xt(t)}function ud(...e){const t=new Set(e),n=new Map;for(const[r,s]of this.unsafeMap.entries())t.has(r)&&n.set(r,s);return new xt(n)}const Va=Symbol("@tsplus/stdlib/Env/Env"),xt=Object.assign(function e(t,n){return this!=null&&this.constructor===e?mu(t):xt.empty.add(t,n)},{sym:Va,empty:mu(new Map)});function mu(e){return{[Va]:rt,add:rd,get:pu,unsafeGet:pu,getMaybe:sd,merge:id,prune:ud,unsafeMap:e}}const Xa=Symbol.for("@effect/core/io/FiberRef");var Za;class Ya{constructor(t,n,r,s,i){this._initial=t,this._diff=n,this._combine=r,this._patch=s,this._fork=i,this[Za]=Xa}}Za=Xa;function od(e,t,n,r,s){return new Ya(e,t,n,r,s)}function Te(e,t=rt,n=(r,s)=>s){return od(e,(r,s)=>()=>s,(r,s)=>i=>s(r(i)),r=>s=>n(s,r(s)),t)}class W{constructor(t){this.__lazy=t}get value(){const t=this.__lazy();return Object.defineProperty(this,"value",{value:t}),t}}W.make=e=>new W(e);const En=W.make(()=>Te(xt.empty));function Ja(e,t,n){return r=>new Zh(t,e,r,n)}function ze(e,t,n){return m(p(t,n),r=>Ja(En.value,r,n)(e),n)}const bn=Object.assign(()=>({[bn.sym]:rt,toEnv(e){return xt(this,e)}}),{sym:Symbol("@tsplus/stdlib/environment/Tag"),is:e=>typeof e=="object"&&e!=null&&bn.sym in e}),tc=Symbol.for("@effect/core/io/Scope"),ec=Symbol.for("@effect/core/io/Scope/Closeable"),nc={$:{},Tag:bn()};function rc(e,t){return e._addFinalizerExit(t)}function ad(e,t,n){return new Xh(e,t,n)}function sc(e,t){return ad(e,n=>b(n,n),t)}function cd(e,t,n){return v(()=>m(sc(En.value,n),r=>t(r.unsafeGet(e)),n),n)}function ld(e,t){return cd(e,q,t)}const fd="(@effect/core) _src/io/Effect/operations/scope.ts",hd=ld(nc.Tag,fd+":6:65");function gi(e){return v(()=>sc(En.value,e),e)}function dd(e,t){return m(gi(t),n=>m(hd,r=>rc(r,s=>ze(e(s),()=>n,t)),t),t)}function R(e,t,n){return m(e,r=>q(t(r),n),n)}function Cn(e,t,n){return m(e,r=>R(t(r),()=>r,n),n)}function pd(e,t){return new Qh(e,t)}const md="(@effect/core) _src/io/Effect/operations/descriptor.ts",gd=pd(q,md+":6:88"),yd="(@effect/core) _src/io/Effect/operations/fiberId.ts",He=R(gd,e=>e.id,yd+":7:76");class _r{constructor(t){this.isInterruptible=t}get isUninterruptible(){return!this.isInterruptible}get toBoolean(){return this.isInterruptible}[g.sym](){return C(this.isInterruptible)}[_.sym](t){return t instanceof _r&&this.isInterruptible===t.isInterruptible}}const ic=new _r(!0),uc=ic,oc=new _r(!1),bd=oc;function gu(e){return e?ic:oc}class yi{constructor(t){this.value=t,this._tag="Success"}[g.sym](){return C(this.value)}[_.sym](t){return t instanceof yi&&F(this.value,t.value)}}class Sr{constructor(t){this.cause=t,this._tag="Failure"}[g.sym](){return C(this.cause)}[_.sym](t){return t instanceof Sr&&F(this.cause,t.cause)}}function Tt(e){return new Sr(e)}const ac=Symbol.for("@effect/core/io/Fiber");function cc(e,t,n){return e._interruptAs(t)}var yu,bu,_u,Su,wu;const It=Symbol.for("@effect/core/io/RuntimeConfig/Flag");class _d{constructor(){this._tag="EnableCurrentFiber",this[yu]=It}[(yu=It,g.sym)](){return I(this._tag)}[_.sym](t){return $n(t)&&this._tag===t._tag}}class Sd{constructor(){this._tag="LogRuntime",this[bu]=It}[(bu=It,g.sym)](){return I(this._tag)}[_.sym](t){return $n(t)&&this._tag===t._tag}}class wd{constructor(){this._tag="SuperviseOperations",this[_u]=It}[(_u=It,g.sym)](){return I(this._tag)}[_.sym](t){return $n(t)&&this._tag===t._tag}}class vd{constructor(){this._tag="TrackRuntimeMetrics",this[Su]=It}[(Su=It,g.sym)](){return I(this._tag)}[_.sym](t){return $n(t)&&this._tag===t._tag}}class kd{constructor(){this._tag="EnableFiberRoots",this[wu]=It}[(wu=It,g.sym)](){return I(this._tag)}[_.sym](t){return $n(t)&&this._tag===t._tag}}const vu=new _d,xd=new Sd,Ed=new wd,Cd=new vd,lc=new kd;function $n(e){return typeof e=="object"&&e!=null&&It in e}function bi(e,t){return ha(e._keyMap,t)}function we(e,t){return bi(e.flags,t)}class $d{constructor(){this.fiberId=Be}unsafeAdd(t,n,r){return we(t.value.flags,lc)&&(ku.value.add(n),n.unsafeOnDone(()=>{ku.value.delete(n)})),!0}}class Id{constructor(t,n){this.fiberId=t,this.parent=n}unsafeAdd(t,n,r){const s=this.parent;return s!=null&&s.unsafeAddChild(n)}}const fc=W.make(()=>new $d);function Rd(e){return new Id(e.fiberId,e)}const ku=W.make(()=>new Set);function ns(e,t){return v(()=>new ja(e,()=>A(fc.value),t),t)}function se(e,t){return new Ka(()=>e,t)}function ut(e,t){return v(()=>{const n=e();return n._tag==="Success"?q(n.value,t):se(n.cause,t)},t)}const Ad=Md;function Md(e,t){return e._await}function hc(e,t){return e._inheritRefs}function Fd(e,t,n){return R(e,t,n)}function Ld(e,t,n){return m(e,r=>Fd(t(),()=>r,n),n)}function Nd(e,t){return Ld(m(Ad(e),n=>ut(()=>n,t),t),()=>hc(e),t)}function dc(e){return st(pi(e,t=>ui(t)?A(void 0):E))}function _i(e,t,n){let r=t,s=e,i;for(;s;){const u=n(r,s);switch(r=u._tag==="Some"?u.value:r,s._tag){case"Then":{i=new J(s.right,i),s=s.left;break}case"Both":{i=new J(s.right,i),s=s.left;break}case"Stackless":{s=s.cause;break}default:{s=void 0;break}}!s&&i&&(s=i.value,i=i.previous)}return r}function pc(e){return _i(e,U(),(t,n)=>ui(n)?A(ht(t,n.fiberId)):A(t))}function Rt(e,t,n,r){return new Ha(e,t,n,r)}function wt(e,t){return new Ka(e,t)}const Lt="(@effect/core) _src/io/Effect/operations/interruption.ts",Me=Si,wr=wi,mc=gc,tr=yc;class qd{constructor(t){this.flag=t,this.restore=(n,r)=>v(()=>er(n(),()=>this.flag,Lt+":34:58"),Lt+":34:33"),this.force=(n,r)=>v(()=>this.flag.isUninterruptible?Od(Pd(Si(n(),Lt+":43:35"),Lt+":43:48"),Lt+":43:64"):er(n(),()=>this.flag,Lt+":44:35"),Lt+":41:33")}}const Bt=m(He,e=>yc(()=>e,Lt+":58:80"),Lt+":58:48");function er(e,t,n){return new jh(e,t,n)}function Od(e,t){return er(e,()=>uc,t)}function Si(e,t){return er(e,()=>bd,t)}function zd(e,t){return new Kh(e,t)}function wi(e,t){return zd(n=>Si(e(new qd(n)),t),t)}function Pd(e,t){return wi(({restore:n})=>m(He,r=>m(ns(n(()=>e,t),t),s=>gc(n(()=>Nd(s,t),t),()=>ns(cc(s,r),t),t),t),t),t)}function gc(e,t,n){return wi(({restore:r})=>Rt(r(()=>e,n),s=>dc(s)?L(t(pc(s)),()=>se(s,n),n):se(s,n),q,n),n)}function yc(e,t){return wt(()=>li(e()),t)}function Dd(e,t,n){return Me(Cn(v(e,n),r=>dd(s=>t(r,s),n),n),n)}function _t(e){return new yi(e)}function et(e,t){return new Ha(e,n=>q(Tt(n),t),n=>q(_t(n),t),t)}const on=_t(void 0);class nr{constructor(){this.first=j(),this.last0=void 0,this.len=0}[Symbol.iterator](){return this.first[Symbol.iterator]()}static empty(){return new nr}static from(t){const n=new nr;for(const r of t)n.append(r);return n}get length(){return this.len}get isEmpty(){return this.len===0}get unsafeHead(){if(!this.isEmpty)return this.first.head}get unsafeTail(){if(!this.isEmpty)return this.first.tail}append(t){const n=K(t,j());return this.len===0?this.first=n:this.last0.tail=n,this.last0=n,this.len+=1,this}prepend(t){return this.insert(0,t),this}unprepend(){if(this.isEmpty)throw new Po;const t=this.first.head;return this.first=this.first.tail,this.len-=1,t}get toList(){return this.first}insert(t,n){if(t<0||t>this.len)throw new Kt(t,0,this.len-1);if(t===this.len)this.append(n);else{const r=this.locate(t),s=K(n,this.getNext(r));r===void 0?this.first=s:r.tail=s,this.len+=1}return this}reduce(t,n){return Yn(this.first,t,n)}getNext(t){return t===void 0?this.first:Ct(t)}locate(t){if(t!==0){if(t===this.len)return this.last0;{let n=this.first;for(let r=t-1;r>0;r--)n=Ct(n);return n}}}}function Je(e,t,n){return v(()=>new ed(e,t(),n),n)}function vi(e,t,n,r){switch(e._tag){case"Failure":switch(t._tag){case"Success":return e;case"Failure":return Tt(r(e.cause,t.cause))}case"Success":switch(t._tag){case"Success":return _t(n(e.value,t.value));case"Failure":return t}}}function _n(e,t){return vi(e,t,(n,r)=>r,Nt)}const bc=W.make(()=>Te(E));function Ud(e,t,n){return new Yh(e,t,n)}function _c(e,t){return Ud(bc.value,e,t)}function Bd(e,t,n){return v(()=>Ja(bc.value,A(t),n)(e),n)}const ki=Gd,Sc=Td;function*Wd(e,t){let n=-1;for(;;){const r=e.next();if(r.done)break;n+=1,yield t(r.value,n)}}function Gd(e,t){return{[Symbol.iterator]:()=>Wd(e[Symbol.iterator](),t)}}function wc(e,t){return{*[Symbol.iterator](){let n=0;for(const r of e)n++>=t&&(yield r)}}}function In(e,t,n){let r=t;const s=e[Symbol.iterator]();for(;;){const i=s.next();if(i.done)break;r=n(r,i.value)}return r}function Td(e,t){return{*[Symbol.iterator](){for(const n of e)yield n;yield t}}}function Hd(e,t){return wt(()=>yh(yr(new Nh(e()))),t)}function ie(e){return e.length}function jd(e,t){return!Number.isInteger(t)||t<0||t>=e.length?E:A(e._get(t))}function Fe(e){return jd(e,0)}function vc(e,t){let n=O();for(let r=e;r<=t;r++)n=ot(n,r);return n}function Kd(e,t){return De(vc(0,e-1),t)}function kc(e,t){return Kd(t,()=>e)}function Qd(e,t){const n=e._arrayLikeIterator();let r,s=t,i=O();for(;(r=n.next())&&!r.done;){const u=r.value,o=u.length;let a=0;for(;a<o;){const c=u[a];i=ot(i,b(c,s)),a++,s++}}return i}function Vd(e){return Qd(e,0)}class Xd{constructor(t){this.joiners=t,this._tag="Pending"}}class Zd{constructor(t){this.value=t,this._tag="Done"}}function xi(e){return new Xd(e)}function xu(e){return new Zd(e)}function Yd(e,t){return v(()=>new Ta(e,()=>Be,t),t)}function Ei(e,t,n){return v(()=>new Ta(e,t,n),n)}function rs(e,t,n){return wr(({restore:r})=>m(et(r(()=>e,n),n),s=>t().done(()=>s,n),n),n)}function xc(e,t){return wt(()=>yr(e(),Ht),t)}function Jd(e,t){return wt(()=>$a(e(),Ht),t)}var Ec;const D="(@effect/core) _src/io/Deferred/definition.ts",Cc=Symbol.for("@effect/core/io/Deferred");function tp(e,t,n){return p(()=>{const r=e.state.get;r._tag==="Pending"&&e.state.set(xi(r.joiners.filter(s=>s!==t)))},n)}class ep{constructor(t,n){this.state=t,this.blockingOn=n,this[Ec]=Cc}await(t){return Ei(n=>{const r=this.state.get;switch(r._tag){case"Done":return he(r.value);case"Pending":return this.state.set(xi([n,...r.joiners])),Ge(tp(this,n,D+":78:45"))}},()=>this.blockingOn,D+":69:43")}complete(t,n){return rs(t,()=>this,D+":96:31")}completeWith(t,n){return p(()=>{const r=this.state.get;switch(r._tag){case"Done":return!1;case"Pending":return this.state.set(xu(t)),r.joiners.forEach(s=>{s(t)}),!0}},D+":111:26")}die(t,n){return this.completeWith(xc(t,D+":137:40"),D+":137:29")}done(t,n){return this.completeWith(ut(t,D+":149:41"),D+":149:29")}fail(t,n){return this.completeWith(Jd(t,D+":157:41"),n)}failCause(t,n){return this.completeWith(wt(t,D+":169:46"),D+":169:29")}interrupt(t){return m(He,n=>this.completeWith(tr(()=>n,D+":177:79"),D+":177:60"),D+":177:34")}interruptAs(t,n){return this.completeWith(tr(t,D+":189:48"),D+":189:29")}isDone(t){return p(()=>this.state.get._tag==="Done",D+":197:26")}poll(t){return p(()=>{const n=this.state.get;switch(n._tag){case"Pending":return E;case"Done":return A(n.value)}},D+":208:26")}succeed(t,n){return this.completeWith(p(t,D+":229:44"),D+":229:29")}unsafeDone(t){const n=this.state.get;n._tag==="Pending"&&(this.state.set(xu(t)),Array.from(n.joiners).reverse().forEach(r=>{r(t)}))}}Ec=Cc;function vr(e){return new ep(new ae(xi([])),e)}function rr(e,t){switch(e._tag){case"Failure":return e;case"Success":return _t(t(e.value))}}function ss(e){const t=e[Symbol.iterator]().next();return!t.done&&t.value?A(In(wc(e,1),rr(t.value,n=>We(n)),(n,r)=>vi(n,r,(s,i)=>tt(s,i),Ia))):E}function Ci(e,t,n,r,s,i,u,o){return At(ve(e,t,n,r,s,i,u,o))}function ve(e,t,n,r,s,i,u,o){switch(e._tag){case"Empty":return P(t);case"Fail":return P(()=>n(e.value,e.trace));case"Die":return P(()=>r(e.value,e.trace));case"Interrupt":return P(()=>s(e.fiberId,e.trace));case"Both":return hn(Z(()=>ve(e.left,t,n,r,s,i,u,o)),()=>Z(()=>ve(e.right,t,n,r,s,i,u,o)),(a,c)=>u(a,c));case"Then":return hn(Z(()=>ve(e.left,t,n,r,s,i,u,o)),()=>Z(()=>ve(e.right,t,n,r,s,i,u,o)),(a,c)=>i(a,c));case"Stackless":return sa(Z(()=>ve(e.cause,t,n,r,s,i,u,o)),a=>o(a,e.stackless))}}function is(e){return Ci(e,()=>Ot,()=>Ot,(t,n)=>new oi(t,n),(t,n)=>new ai(t,n),(t,n)=>new Wt(t,n),(t,n)=>new gr(t,n),(t,n)=>new ci(t,n))}function $c(e,t){return m(He,n=>cc(e,n),t)}function np(e,t){return v(()=>new Jh(n=>e((r,s)=>v(()=>new td(r(),A(n),s),s))),t)}function Ic(e){const t=e[Symbol.iterator]().next();return!t.done&&t.value?A(rr(In(wc(e,1),rr(t.value,n=>We(n)),(n,r)=>vi(n,r,(s,i)=>tt(s,i),(s,i)=>Nt(s,i))),n=>Oe(n))):E}function nt(e,t){return ft(e)?t():e.value}function $i(e,t){return m(e,rt,t)}class rp{constructor(t){this.value=t,this.removed=!1,this.right=void 0,this.left=void 0}}class kr{constructor(){this.length=0,this.headN=void 0,this.tailN=void 0}get head(){return this.headN===void 0?void 0:this.headN.value}get isEmpty(){return this.length===0}get tail(){return this.tailN===void 0?void 0:this.tailN.value}forEach(t){let n=this.headN;for(;n!==void 0;)t(n.value),n=n.right}add(t){const n=new rp(t);return this.length===0&&(this.headN=n),this.tailN===void 0?this.tailN=n:(this.tailN.right=n,n.left=this.tailN,this.tailN=n),this.length+=1,n}empty(){this.length=0,this.headN=this.tailN=void 0}pop(){const t=this.tailN;if(t!==void 0)return this.remove(t),t.value}remove(t){t.removed||(t.removed=!0,t.left!==void 0&&t.right!==void 0?(t.left.right=t.right,t.right.left=t.left):t.left!==void 0?(this.tailN=t.left,t.left.right=void 0):t.right!==void 0?(this.headN=t.right,t.right.left=void 0):(this.tailN=void 0,this.headN=void 0),this.length>0&&(this.length-=1))}shift(){const t=this.headN;if(t!==void 0)return this.remove(t),t.value}[Symbol.iterator](){let t=!1,n=this.headN;return{next(){if(t)return this.return();if(n==null)return t=!0,this.return();const r=n.value;return n=n.right,{done:t,value:r}},return(r){return t||(t=!0),{done:!0,value:r}}}}}const sr=Symbol.for("@tsplus/stdlib/collections/mutable/MutableQueue"),lt=Symbol.for("@tsplus/stdlib/collections/mutable/MutableQueue/Empty");var Eu;class sp{constructor(t){this[Eu]=sr,this.queue=new kr,this.max=t}get size(){return this.queue.length}get isEmpty(){return this.size===0}get isFull(){return this.size===this.capacity}get capacity(){return this.max}offer(t){return this.isFull?!1:(this.queue.add(t),!0)}offerAll(t){const n=t[Symbol.iterator]();let r,s=O(),i=!0;for(;i&&(r=n.next())&&!r.done;)i=this.offer(r.value);for(;r&&!r.done;)s=ot(s,r.value),r=n.next();return s}poll(t){return this.isEmpty?t:this.queue.shift()}pollUpTo(t){let n=O(),r=0;for(;r<t;){const s=this.poll(lt);if(s===lt)break;n=ot(n,s),r+=1}return n}[(Eu=sr,Symbol.iterator)](){return this.queue[Symbol.iterator]()}}function ip(e){return new sp(e)}var Cu;class up{constructor(){this[Cu]=sr,this.queue=new kr}get size(){return this.queue.length}get isEmpty(){return this.size===0}get isFull(){return!1}get capacity(){return Number.MAX_SAFE_INTEGER}offer(t){return this.queue.add(t),!0}offerAll(t){for(const n of t)this.offer(n);return O()}poll(t){return this.isEmpty?t:this.queue.shift()}pollUpTo(t){let n=O(),r=0;for(;r<t;){const s=this.poll(lt);if(s===lt)break;n=ot(n,s),r+=1}return n}[(Cu=sr,Symbol.iterator)](){return this.queue[Symbol.iterator]()}}function Rc(){return new up}class Ii extends ae{constructor(t){super(t)}}function op(e,t){return p(()=>vr(e()),t)}function Ac(e){return m(He,t=>op(()=>t,e),e)}function ap(e,t){return R(e,A,t)}const cp="(@effect/core) _src/io/Effect/operations/succeedNone.ts",lp=p(()=>E,cp+":6:78");function fp(e,t,n){return m(v(e,n),r=>r?ap(t(),n):lp,n)}function us(e,t){return new Hh(e,t)}function Ri(e){return new Bs(e)}function hp(e,t){return e._take(t)}function Ai(e,t){if(t<=0)return e;if(t>=e.length)return Y;{const n=e.length;switch(e._typeId){case ke:return Y;case Us:return new Qn(e.chunk,e.offset+t,e.length-t);case Pe:return t>0?Y:e;default:return new Qn(e,t,n-t)}}}function Mc(e,t){return b(hp(e,t),Ai(e,t))}function dp(e,t,n){const r=Math.min(e.length,t.length);if(r===0)return O();const s=e._arrayLikeIterator(),i=t._arrayLikeIterator();let u=0,o=0,a=0,c=0,l=0,f,d,y,w,M=O();for(;u<r;)o<c&&a<l?(M=ot(M,n(f[o],d[a])),u++,o++,a++):o===c&&(y=s.next())&&!y.done?(f=y.value,c=f.length,o=0):a===l&&(w=i.next())&&!w.done&&(d=w.value,l=d.length,a=0);return M}function pp(e,t){return dp(e,t,(n,r)=>b(n,r))}function mp(e,t){switch(e._typeId){case kn:{const n=e._arrayLike(),r=n.length;let s=0;for(;s<r;)t(n[s]),s++;return}default:{const n=e._arrayLikeIterator();let r;for(;(r=n.next())&&!r.done;){const s=r.value,i=s.length;let u=0;for(;u<i;){const o=s[u];t(o),u++}}return}}}const Fc=gp;function gp(e,t){switch(e._typeId){case kn:{const n=e._arrayLike(),r=n.length;let s=0,i=O();for(;s<r;){const u=n[s];t(u)&&(i=ot(i,u)),s++}return i}default:{const n=e._arrayLikeIterator();let r,s=O();for(;(r=n.next())&&!r.done;){const i=r.value,u=i.length;let o=0;for(;o<u;){const a=i[o];t(a)&&(s=ot(s,a)),o++}}return s}}}function Mi(e,t){return e._get(t)}function Lc(e,t){return e._prepend(t)}const Ce="(@effect/core) _src/io/Queue/definition/common.ts",$u=Symbol.for("@effect/core/io/Queue"),yp={get[$u](){return $u},isFull(e){return R(this.size,t=>t===this.capacity,Ce+":115:25")},isEmpty(e){return R(this.size,t=>t===0,Ce+":118:25")}},bp={poll(e){return R(this.takeUpTo(1,Ce+":124:25"),t=>Fe(t),Ce+":124:32")},takeN(e,t){return this.takeBetween(e,e)},takeBetween(e,t){return v(()=>Nc(this,e,t,O(),Ce+":130:51"),Ce+":130:33")}},_p={...yp,...bp};function Nc(e,t,n,r,s){return n<t?q(r,s):m(e.takeUpTo(n,s),i=>{const u=t-i.length;return u===1?R(e.take,o=>ot(Ae(r,i),o),s):u>1?m(e.take,o=>Nc(e,u-1,n-i.length-1,ot(Ae(r,i),o),s),s):q(Ae(r,i),s)},s)}const Sp="(@effect/core) _src/io/Queue/operations/_internal/unsafeCompleteDeferred.ts";function ir(e,t){return e.unsafeDone(q(t,Sp+":2:47"))}function Sn(e,t){return e.offerAll(t)}function te(e){return e.pollUpTo(Number.MAX_SAFE_INTEGER)}function an(e,t,n){let r=!0;for(;r&&!t.isEmpty;){const s=n.poll(lt);if(s!==lt){const i=t.poll(lt);i!==lt?(ir(s,i),e.unsafeOnQueueEmptySpace(t,n)):Sn(n,Lc(te(n),s)),r=!0}else r=!1}}function Iu(e,t){return e.pollUpTo(t)}function wp(e,t){Sn(e,Fc(te(e),n=>t!==n))}class Wn{constructor(t,n,r){this.nextKey=t,this.exit=n,this.update=r,this._tag="Exited"}}class Fi{constructor(t,n,r){this.nextKey=t,this._finalizers=n,this.update=r,this._tag="Running"}finalizers(){return this._finalizers}}const x="(@effect/core) _src/io/Effect/operations/excl-forEach.ts",qc=xr,Oc=Li,vp=Cp;function xr(e,t,n){return v(()=>{const r=[];return R(Li(e,s=>R(t(s),i=>{r.push(i)},n),n),()=>kt(r),n)},n)}function Li(e,t,n){return m(p(e,n),r=>zc(r[Symbol.iterator](),t),n)}function zc(e,t){const n=e.next();return n.done?$:L(t(n.value),()=>zc(e,t),x+":92:51")}function os(e,t,n){return _c(r=>vt(r,()=>Pc(e,t,n),s=>kp(e,s,t,n)),n)}function Pc(e,t,n){return v(()=>m(p(()=>[],n),r=>R(Er(()=>ki(e(),(s,i)=>[s,i]),([s,i])=>m(v(()=>t(s),n),u=>p(()=>{r[i]=u},n),n),n),()=>kt(r),n),n),n)}function kp(e,t,n,r){return v(()=>{if(t<1)return Hd(()=>`Unexpected nonpositive value "${t}" passed to foreachParN`,r);const s=kt(e()),i=ie(s);if(i===0)return q(O(),r);function u(o,a){return m(R(o.takeUpTo(1,r),c=>Fe(c),r),c=>vt(c,()=>$,({tuple:[l,f]})=>m(Cn(n(l),d=>p(()=>{a[f]=d},r),r),()=>u(o,a),r)),r)}return m(p(()=>new Array(i),r),o=>m(Dc(i,r),a=>m(a.offerAll(Vd(s),r),()=>R(Er(()=>kc(u(a,o),t),rt,r),()=>kt(o),r),r),r),r)},r)}function xp(e,t,n){return _c(r=>vt(r,()=>Er(e,t,n),s=>Ep(e,s,t,n)),n)}function Er(e,t,n){return v(()=>{const r=kt(e()),s=ie(r);return s===0?$:wr(({restore:i})=>{const u=vr(Be),o=new ee(0);return m(np(a=>xr(()=>r,c=>ns(a(()=>Rt(i(()=>v(()=>t(c),n),n),l=>L(u.fail(()=>{},n),()=>se(l,n),n),()=>(o.incrementAndGet()===s&&u.unsafeDone($),$),n),n),n),n),n),a=>Rt(i(()=>u.await(n),n),c=>m(Pc(()=>a,l=>$c(l,n),n),l=>{const f=ss(l);return f._tag==="Some"&&f.value._tag==="Failure"?wt(()=>Ia(is(c),f.value.cause),n):wt(()=>is(c),n)},n),c=>Li(()=>a,l=>hc(l),n),n),n)},n)},n)}function Ep(e,t,n,r){return v(()=>{const s=e(),i=kt(s),u=ie(i);if(u===0)return $;function o(a){return m(R(a.takeUpTo(1,r),c=>Fe(c),r),c=>vt(c,()=>$,l=>m(n(l),()=>o(a),r)),r)}return m(Dc(u,r),a=>m(a.offerAll(s,r),()=>Er(()=>kc(o(a),t),rt,r),r),r)},r)}function Cp(e,t){return xr(e,rt,t)}function $p(e,t,n,r){return $i(e.ref.modify(s=>{switch(s._tag){case"Exited":return b($,s);case"Running":switch(n._tag){case"Sequential":return b(m(xr(()=>Array.from(s.finalizers()).reverse(),([i,u])=>et(s.update(u)(t),r),r),i=>ut(()=>nt(Ic(i),()=>on),r),r),new Wn(s.nextKey,t,s.update));case"Parallel":return b(m(os(()=>Array.from(s.finalizers()).reverse(),([i,u])=>et(s.update(u)(t),r),r),i=>ut(()=>nt(ss(i),()=>on),r),r),new Wn(s.nextKey,t,s.update));case"ParallelN":return b(Bd(m(os(()=>Array.from(s.finalizers()).reverse(),([i,u])=>et(s.update(u)(t),r),r),i=>ut(()=>nt(ss(i),()=>on),r),r),n.n,r),new Wn(s.nextKey,t,s.update))}}},r),r)}function Dc(e,t){return m(p(()=>ip(e),t),n=>Ip(n,new Mp,t),t)}function Ip(e,t,n){return R(Ac(n),r=>Ap(e,Rc(),r,new Ii(!1),t),n)}const Rp={..._p,get capacity(){return this.queue.capacity},get size(){return v(()=>this.shutdownFlag.get?Bt:q(this.queue.size-this.takers.size+this.strategy.surplusSize,x+":639:28"),x+":636:33")},get awaitShutdown(){return this.shutdownHook.await(x+":646:62")},get isShutdown(){return p(()=>this.shutdownFlag.get,x+":649:26")},get shutdown(){return Me(us((e,t)=>(this.shutdownFlag.set(!0),yn(fp(()=>this.shutdownHook.succeed(()=>{},x+":655:61"),()=>L(xp(()=>te(this.takers),n=>n.interruptAs(()=>t,x+":661:47"),x+":657:35"),()=>this.strategy.shutdown,x+":662:14"),x+":654:31"),x+":663:13")),x+":652:37"),x+":664:23")},offer(e,t){return v(()=>{if(this.shutdownFlag.get)return Bt;let n;if(this.queue.isEmpty){const s=this.takers.poll(lt);s!==lt?(ir(s,e),n=!0):n=!1}else n=!1;if(n)return q(!0,x+":684:33");const r=this.queue.offer(e);return an(this.strategy,this.queue,this.takers),r?q(!0,x+":694:28"):this.strategy.handleSurplus(Ri(e),this.queue,this.takers,this.shutdownFlag,x+":695:61")},x+":667:33")},offerAll(e,t){return v(()=>{if(this.shutdownFlag.get)return Bt;const n=kt(e),r=this.queue.isEmpty?Iu(this.takers,ie(n)):O(),{tuple:[s,i]}=Mc(n,ie(r));if(mp(pp(r,s),({tuple:[o,a]})=>{ir(o,a)}),fn(i))return q(!0,x+":722:33");const u=Sn(this.queue,i);return an(this.strategy,this.queue,this.takers),fn(u)?q(!0,x+":732:28"):this.strategy.handleSurplus(u,this.queue,this.takers,this.shutdownFlag,x+":733:61")},x+":704:33")},get take(){return us((e,t)=>{if(this.shutdownFlag.get)return Bt;const n=this.queue.poll(lt);if(n!==lt)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),q(n,x+":752:33");{const r=vr(t);return mc(v(()=>(this.takers.offer(r),an(this.strategy,this.queue,this.takers),this.shutdownFlag.get?Bt:r.await(x+":766:94")),x+":759:37"),()=>p(()=>wp(this.takers,r),x+":768:32"),x+":767:23")}},x+":742:37")},get takeAll(){return v(()=>this.shutdownFlag.get?Bt:p(()=>{const e=te(this.queue);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),e},x+":777:25"),x+":774:33")},takeUpTo(e,t){return v(()=>this.shutdownFlag.get?Bt:p(()=>{const n=Iu(this.queue,e);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),n},x+":791:25"),x+":788:33")}};function Ap(e,t,n,r,s){return Object.setPrototypeOf({queue:e,takers:t,shutdownHook:n,shutdownFlag:r,strategy:s},Rp)}class Mp{constructor(){this.putters=Rc()}handleSurplus(t,n,r,s,i){return us((u,o)=>{const a=vr(o);return mc(v(()=>(this.unsafeOffer(t,a),this.unsafeOnQueueEmptySpace(n,r),an(this,n,r),s.get?Bt:a.await(x+":846:66")),x+":842:35"),()=>p(()=>this.unsafeRemove(a),x+":847:42"),x+":847:21")},x+":839:37")}unsafeRemove(t){Sn(this.putters,Fc(te(this.putters),({tuple:[,n]})=>n!==t))}unsafeOffer(t,n){let r=t;for(;ie(r)>0;){const s=Mi(r,0);r=Ai(r,1),ie(r)===0?this.putters.offer(b(s,n,!0)):this.putters.offer(b(s,n,!1))}}unsafeOnQueueEmptySpace(t,n){let r=!0;for(;r&&!t.isFull;){const s=this.putters.poll(lt);if(s!==lt){const i=t.offer(s.get(0));i&&s.get(2)?ir(s.get(1),!0):i||Sn(this.putters,Lc(te(this.putters),s)),an(this,t,n)}else r=!1}}get surplusSize(){return this.putters.size}get shutdown(){return m(He,t=>m(p(()=>te(this.putters),x+":905:39"),n=>R(os(()=>n,({tuple:[r,s,i]})=>i?s.interruptAs(()=>t,x+":908:78"):$,x+":906:26"),()=>{},x+":906:8"),x+":905:24"),x+":904:24")}}const Ru="(@effect/core) _src/io/Effect/operations/tuple.ts";function Fp(...e){return R(vp(()=>e,Ru+":23:27"),t=>b(...t),Ru+":23:34")}function Lp(e,t,n,r){return Rt(e,s=>sn(La(s),t,se),n,r)}function Np(e,t,n,r){return Lp(e,s=>q(t(s),r),s=>q(n(s),r),r)}function qp(e,t){return Np(e,()=>{},()=>{},t)}var Uc;const Bc=Symbol.for("@effect/core/stream/Channel/ChannelState");class Cr{constructor(){this[Uc]=Bc}}Uc=Bc;class Op extends Cr{constructor(){super(...arguments),this._tag="Done"}}class zp extends Cr{constructor(){super(...arguments),this._tag="Emit"}}class Pp extends Cr{constructor(t){super(),this.effect=t,this._tag="Effect"}}class Dp extends Cr{constructor(t,n,r,s){super(),this.upstream=t,this.onEffect=n,this.onEmit=r,this.onDone=s,this._tag="Read"}}const ye=new Op,Nr=new zp;function Qe(e){return new Pp(e)}function qr(e,t,n,r){return new Dp(e,t,n,r)}function Or(e,t){return e._tag==="Effect"?e.effect:$}function Au(e,t){return e._tag==="Effect"?yn(qp(e.effect,t),t):void 0}function cn(e,t,n){switch(e._tag){case"Failure":return t(e.cause);case"Success":return n(e.value)}}function Wc(e,t,n){return Rt(e,t,q,n)}function Up(e,t){return new ja(e,()=>E,t)}const Mu=Symbol.for("@tsplus/stdlib/collections/ImmutableQueue");var Fu;class ue{constructor(t){this.backingList=t,this[Fu]=Mu}[(Fu=Mu,g.sym)](){return this.backingList[g.sym]()}[_.sym](t){return t instanceof ue&&F(this.backingList,t.backingList)}[Symbol.iterator](){return this.backingList[Symbol.iterator]()}}function Bp(){return new ue(j())}function Ni(e,t,n,r){return m(e,s=>R(t(),i=>n(s,i),r),r)}function Wp(e,t){return new ue(va(e.backingList,si(t)))}function qi(e,t){return Wp(e,We(t))}var Gc,Tc,Hc,jc;const B="(@effect/core) _src/stream/Channel/Subexecutor.ts",Qt=Symbol.for("@effect/core/stream/Channel/Subexecutor");class Oi{constructor(t,n,r,s,i,u,o,a){this.upstreamExecutor=t,this.createChild=n,this.lastDone=r,this.activeChildExecutors=s,this.combineChildResults=i,this.combineWithChildResult=u,this.onPull=o,this.onEmit=a,this._tag="PullFromUpstream",this[Gc]=Qt}close(t,n){const r=this.upstreamExecutor.close(t,B+":51:45"),s=Sc(ki(this.activeChildExecutors,u=>u?.childExecutor.close(t,B+":53:65")),r),i=In(s,void 0,(u,o)=>u!=null&&o!=null?Ni(u,()=>et(o,B+":59:39"),(a,c)=>_n(a,c),B+":59:29"):u??(o!=null?et(o,B+":63:27"):void 0));return i==null?i:m(i,u=>ut(()=>u,B+":69:74"),B+":69:52")}enqueuePullFromChild(t){return new Oi(this.upstreamExecutor,this.createChild,this.lastDone,qi(this.activeChildExecutors,t),this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}}Gc=Qt;class Gp{constructor(t,n,r){this.childExecutor=t,this.parentSubexecutor=n,this.onEmit=r,this._tag="PullFromChild",this[Tc]=Qt}close(t,n){const r=this.childExecutor.close(t,B+":105:42"),s=this.parentSubexecutor.close(t,B+":106:46");return r!=null&&s!=null?m(Ni(et(r,B+":110:14"),()=>et(s,B+":111:27"),(i,u)=>_n(i,u),B+":111:17"),i=>ut(()=>i,B+":112:39"),B+":112:17"):r??s??void 0}enqueuePullFromChild(t){return this}}Tc=Qt;class zi{constructor(t,n,r,s,i,u,o){this.upstreamExecutor=t,this.lastDone=n,this.activeChildExecutors=r,this.upstreamDone=s,this.combineChildResults=i,this.combineWithChildResult=u,this.onPull=o,this._tag="DrainChildExecutors",this[Hc]=Qt}close(t,n){const r=this.upstreamExecutor.close(t,B+":146:45"),s=Sc(ki(this.activeChildExecutors,i=>i?.childExecutor.close(t,B+":148:65")),r);return In(s,void 0,(i,u)=>i!=null&&u!=null?Ni(i,()=>et(u,B+":155:39"),(o,a)=>_n(o,a),B+":155:29"):i??(u!=null?et(u,B+":159:27"):void 0))}enqueuePullFromChild(t){return new zi(this.upstreamExecutor,this.lastDone,qi(this.activeChildExecutors,t),this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}}Hc=Qt;class Tp{constructor(t,n){this.value=t,this.next=n,this._tag="Emit",this[jc]=Qt}close(t,n){return this.next.close(t,B+":191:27")}enqueuePullFromChild(t){return this}}jc=Qt;function Ve(e,t,n,r,s,i,u,o){return new Oi(e,t,n,r,s,i,u,o)}function qn(e,t,n){return new Gp(e,t,n)}function On(e,t,n,r,s,i,u){return new zi(e,t,n,r,s,i,u)}function zr(e,t){return new Tp(e,t)}function ln(e,t){if(z(e))return e;{const n=K(t(e.head),j());let r=n,s=e.tail;for(;!z(s);){const i=K(t(s.head),j());r.tail=i,r=i,s=s.tail}return n}}function Hp(e,t){let n=e;for(;!z(n);){if(t(n.head))return A(n.head);n=n.tail}return E}const Pr=jp;function jp(e,t){return Hp(e.backingList,t)}function Lu(e,t){return new ue(tt(e.backingList,t))}class Kp{constructor(t){this.value=t,this._tag="Pulled"}}class Qp{constructor(t){this.activeDownstreamCount=t,this._tag="NoUpstream"}}function Nu(e){return new Kp(e)}function Vp(e){return new Qp(e)}function qu(e){const t=ct(e.backingList);return t===0?E:A(b(pt(e.backingList),t===1?new ue(j()):new ue(Ct(e.backingList))))}const h="(@effect/core) _src/stream/Channel/ChannelExecutor.ts";class $e{constructor(t,n,r){this.providedEnv=n,this.executeCloseLastSubstream=r,this.done=void 0,this.doneStack=T(),this.emitted=void 0,this.inProgressFinalizer=void 0,this.input=void 0,this.activeSubexecutor=void 0,this.cancelled=void 0,this.closeLastSubstream=void 0,this.currentChannel=t()}restorePipe(t,n,r){const s=this.input;return this.input=n,s!=null?s.close(t,h+":86:47"):$}unwindAllFinalizers(t,n,r){for(;ct(n)!==0;){const s=pt(n);s._tag==="ContinuationK"||(t=L(t,()=>et(s.finalizer(r),h+":100:46"),h+":100:20")),n=Ct(n)??T()}return t}popAllFinalizers(t,n){const r=m(this.unwindAllFinalizers(p(()=>on,h+":112:21"),this.doneStack,t),s=>ut(()=>s,h+":115:36"),h+":115:14");return this.doneStack=T(),this.storeInProgressFinalizer(r),r}popNextFinalizersGo(t,n){for(;ct(t)>0;){const r=pt(t);if(r._tag==="ContinuationK")return t;n.append(r),t=Ct(t)??T()}return T()}popNextFinalizers(){const t=nr.empty();return this.doneStack=this.popNextFinalizersGo(this.doneStack,t),si(t)}storeInProgressFinalizer(t){this.inProgressFinalizer=t}clearInProgressFinalizer(){this.inProgressFinalizer=void 0}ifNotNull(t){return t??$}close(t,n){let r;const s=this.inProgressFinalizer;s!=null&&(r=Je(s,()=>p(()=>this.clearInProgressFinalizer(),h+":163:23"),h+":162:51"));const i=this.activeSubexecutor==null?void 0:this.activeSubexecutor.close(t,h+":167:104");let u;const o=this.popAllFinalizers(t,h+":170:49");if(o!=null&&(u=Je(o,()=>p(()=>this.clearInProgressFinalizer(),h+":173:23"),h+":172:42")),!(i==null&&r==null&&u==null))return m(Me(R(Fp(et(this.ifNotNull(i),h+":186:45"),et(this.ifNotNull(r),h+":187:51"),et(this.ifNotNull(u),h+":188:37")),({tuple:[a,c,l]})=>_n(_n(a,c),l),h+":190:11"),h+":191:23"),a=>ut(()=>a,h+":192:37"),h+":192:15")}getDone(){return this.done}getEmit(){return this.emitted}cancelWith(t){this.cancelled=t}run(){let t;for(;t==null;)if(this.cancelled!=null)t=this.processCancellation();else if(this.activeSubexecutor!=null)t=this.runSubexecutor(h+":214:37");else if(this.currentChannel==null)t=ye;else try{const n=this.currentChannel;switch(n._tag){case"Bridge":{if(this.currentChannel=n.channel,this.input!=null){const r=this.input;this.input=void 0;const s=L(n.input.awaitRead,()=>v(()=>{const i=r.run();switch(i._tag){case"Done":return cn(r.getDone(),u=>n.input.error(u),u=>n.input.done(u));case"Emit":return L(n.input.emit(r.getEmit()),()=>s,h+":249:38");case"Effect":return Rt(i.effect,u=>n.input.error(u),()=>s,h+":252:62");case"Read":return Wc(Kc(i,()=>s,h+":258:46"),u=>n.input.error(u),h+":258:76")}},h+":236:42"),h+":235:91");t=Qe(m(Up(s,h+":266:33"),i=>p(()=>this.addFinalizer(u=>L($c(i,h+":270:44"),()=>v(()=>{const o=this.restorePipe(u,r,h+":272:64");return o??$},h+":271:52"),h+":270:48")),h+":267:37"),h+":266:43"))}break}case"PipeTo":{const r=this.input,s=new $e(n.left,this.providedEnv,i=>this.executeCloseLastSubstream(i));s.input=r,this.input=s,this.addFinalizer(i=>{const u=this.restorePipe(i,r,h+":296:50");return u??$}),this.currentChannel=n.right();break}case"Read":{t=qr(this.input,rt,r=>{this.currentChannel=n.more(r)},r=>{this.currentChannel=n.done.onExit(r)});break}case"SucceedNow":{t=this.doneSucceed(n.terminal);break}case"Fail":{t=this.doneHalt(n.error());break}case"Succeed":{t=this.doneSucceed(n.effect());break}case"Suspend":{this.currentChannel=n.effect();break}case"FromEffect":{const r=this.providedEnv!=null?ze(n.effect(),()=>this.providedEnv,h+":346:40"):n.effect();t=Qe(Rt(r,s=>{const i=this.doneHalt(s);return i==null?$:Or(i,h+":356:48")},s=>{const i=this.doneSucceed(s);return i==null?$:Or(i,h+":363:48")},h+":350:42"));break}case"Emit":{this.emitted=n.out(),this.currentChannel=this.activeSubexecutor!=null?void 0:new jo(void 0),t=Nr;break}case"Ensuring":{this.runEnsuring(n);break}case"ConcatAll":{const r=new $e(n.value,this.providedEnv,s=>p(()=>{const i=this.closeLastSubstream==null?$:this.closeLastSubstream;this.closeLastSubstream=L(i,()=>s,h+":392:64")},h+":388:35"));r.input=this.input,this.activeSubexecutor=Ve(r,n.k,void 0,Bp(),n.combineInners,n.combineAll,n.onPull,n.onEmit),this.closeLastSubstream=void 0,this.currentChannel=void 0;break}case"Fold":{this.doneStack=tt(this.doneStack,n.k),this.currentChannel=n.value;break}case"BracketOut":{t=this.runBracketOut(n);break}case"Provide":{const r=this.providedEnv;this.providedEnv=n.env(),this.currentChannel=n.channel,this.addFinalizer(()=>p(()=>{this.providedEnv=r},h+":431:33"));break}}}catch(n){this.currentChannel=ne(()=>yr(n))}return t}doneSucceed(t){if(ct(this.doneStack)===0)return this.done=_t(t),this.currentChannel=void 0,ye;const n=pt(this.doneStack);if(n._tag==="ContinuationK"){this.doneStack=Ct(this.doneStack)??T(),this.currentChannel=n.onSuccess(t);return}const r=this.popNextFinalizers();if(ct(this.doneStack)===0)return this.doneStack=r,this.done=_t(t),this.currentChannel=void 0,ye;const s=this.runFinalizers(ln(r,i=>i.finalizer),_t(t),h+":474:47");return this.storeInProgressFinalizer(s),Qe(L(Me(Je(s,()=>p(()=>this.clearInProgressFinalizer(),h+":483:33"),h+":483:18"),h+":484:25"),()=>p(()=>this.doneSucceed(t),h+":484:44"),h+":484:29"))}doneHalt(t){if(ct(this.doneStack)===0)return this.done=Tt(t),this.currentChannel=void 0,ye;const n=pt(this.doneStack);if(n._tag==="ContinuationK"){this.doneStack=Ct(this.doneStack)??T(),this.currentChannel=n.onHalt(t);return}const r=this.popNextFinalizers();if(ct(this.doneStack)===0)return this.doneStack=r,this.done=Tt(t),this.currentChannel=void 0,ye;const s=this.runFinalizers(ln(r,i=>i.finalizer),Tt(t),h+":513:47");return this.storeInProgressFinalizer(s),Qe(L(Me(Je(s,()=>p(()=>this.clearInProgressFinalizer(),h+":522:33"),h+":522:18"),h+":523:25"),()=>p(()=>this.doneHalt(t),h+":524:33"),h+":524:18"))}processCancellation(){return this.currentChannel=void 0,this.done=this.cancelled,this.cancelled=void 0,ye}runBracketOut(t){return Qe(wr(({restore:n})=>Rt(n(()=>this.provide(t.acquire(),h+":540:29"),h+":540:16"),r=>p(()=>{this.currentChannel=new Ws(()=>r)},h+":542:27"),r=>p(()=>{this.addFinalizer(s=>t.finalizer(r,s)),this.currentChannel=new Ko(()=>r)},h+":546:27"),h+":540:68"),h+":539:33"))}provide(t,n){return this.providedEnv==null?t:ze(t,()=>this.providedEnv,h+":561:34")}runEnsuring(t){this.addFinalizer(t.finalizer),this.currentChannel=t.channel}addFinalizer(t){this.doneStack=tt(this.doneStack,new Mf(t))}runFinalizers(t,n,r){return ct(t)===0?void 0:m(R(qc(()=>t,s=>et(s(n),h+":582:55"),h+":582:23"),s=>{const i=Ic(s);return i._tag==="Some"?i.value:on},h+":583:13"),s=>ut(()=>s,h+":590:39"),h+":590:17")}runSubexecutor(t){const n=this.activeSubexecutor;switch(n._tag){case"PullFromUpstream":return this.pullFromUpstream(n);case"PullFromChild":return this.pullFromChild(n.childExecutor,n.parentSubexecutor,n.onEmit,n);case"DrainChildExecutors":return this.drainChildExecutors(n);case"Emit":return this.emitted=n.value,this.activeSubexecutor=n.next,Nr}}replaceSubexecutor(t){this.currentChannel=void 0,this.activeSubexecutor=t}finishSubexecutorWithCloseEffect(t,...n){this.addFinalizer(()=>Oc(()=>n,s=>m(p(()=>s(t),h+":634:25"),i=>i??$,h+":634:59"),h+":631:28"));const r=cn(t,s=>this.doneHalt(s),s=>this.doneSucceed(s));return this.activeSubexecutor=void 0,r}finishWithExit(t,n){const r=cn(t,s=>this.doneHalt(s),s=>this.doneSucceed(s));return this.activeSubexecutor=void 0,r==null?$:Or(r)}applyUpstreamPullStrategy(t,n,r){switch(r._tag){case"PullAfterNext":return b(r.emitSeparator,!t||st(Pr(n,s=>s!=null))?Lu(n,void 0):n);case"PullAfterAllEnqueued":return b(r.emitSeparator,!t||st(Pr(n,s=>s!=null))?qi(n,void 0):n)}}performPullFromUpstream(t){return qr(t.upstreamExecutor,n=>{const r=this.closeLastSubstream==null?$:this.closeLastSubstream;return this.closeLastSubstream=void 0,L(this.executeCloseLastSubstream(r),()=>n,h+":693:59")},n=>{if(this.closeLastSubstream!=null){const r=this.closeLastSubstream;return this.closeLastSubstream=void 0,R(this.executeCloseLastSubstream(r),()=>{const s=new $e(()=>t.createChild(n),this.providedEnv,o=>this.executeCloseLastSubstream(o));s.input=this.input;const{tuple:[i,u]}=this.applyUpstreamPullStrategy(!1,t.activeChildExecutors,t.onPull(Nu(n)));this.activeSubexecutor=qn(s,Ve(t.upstreamExecutor,t.createChild,t.lastDone,u,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit),t.onEmit),st(i)&&(this.activeSubexecutor=zr(i.value,this.activeSubexecutor))},h+":700:63")}else{const r=new $e(()=>t.createChild(n),this.providedEnv,u=>this.executeCloseLastSubstream(u));r.input=this.input;const{tuple:[s,i]}=this.applyUpstreamPullStrategy(!1,t.activeChildExecutors,t.onPull(Nu(n)));this.activeSubexecutor=qn(r,Ve(t.upstreamExecutor,t.createChild,t.lastDone,i,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit),t.onEmit),st(s)&&(this.activeSubexecutor=zr(s.value,this.activeSubexecutor));return}},n=>{if(st(Pr(t.activeChildExecutors,r=>r!=null))){const r=On(t.upstreamExecutor,t.lastDone,Lu(t.activeChildExecutors,void 0),t.upstreamExecutor.getDone(),t.combineChildResults,t.combineWithChildResult,t.onPull);if(this.closeLastSubstream!=null){const s=this.closeLastSubstream;this.closeLastSubstream=void 0,R(this.executeCloseLastSubstream(s),()=>this.replaceSubexecutor(r),h+":796:58");return}this.replaceSubexecutor(r);return}else{const r=this.closeLastSubstream,s=this.finishSubexecutorWithCloseEffect(rr(n,i=>t.combineWithChildResult(t.lastDone,i)),()=>r,i=>t.upstreamExecutor.close(i,h+":808:50"));return s!=null?Au(s,h+":810:64"):void 0}})}pullFromUpstream(t){return vt(qu(t.activeChildExecutors),()=>this.performPullFromUpstream(t),({tuple:[n,r]})=>{const s=Ve(t.upstreamExecutor,t.createChild,t.lastDone,r,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit);if(n==null)return this.performPullFromUpstream(s);this.replaceSubexecutor(qn(n.childExecutor,s,n.onEmit))})}drainChildExecutors(t){return vt(qu(t.activeChildExecutors),()=>{const n=this.closeLastSubstream;return n!=null&&this.addFinalizer(()=>p(()=>n,h+":856:49")),this.finishSubexecutorWithCloseEffect(t.upstreamDone,()=>n,r=>t.upstreamExecutor.close(r,h+":861:48"))},({tuple:[n,r]})=>{if(n!=null){const u=On(t.upstreamExecutor,t.lastDone,r,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull);this.replaceSubexecutor(qn(n.childExecutor,u,n.onEmit));return}const{tuple:[s,i]}=this.applyUpstreamPullStrategy(!0,r,t.onPull(Vp(In(r,0,(u,o)=>o!=null?u+1:u))));return this.replaceSubexecutor(On(t.upstreamExecutor,t.lastDone,i,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull)),vt(s,()=>{},u=>(this.emitted=u,Nr))})}handleSubexecFailure(t,n,r){return this.finishSubexecutorWithCloseEffect(Tt(r),s=>n.close(s,h+":922:40"),s=>t.close(s,h+":923:36"))}finishWithDoneValue(t,n,r){switch(n._tag){case"PullFromUpstream":{const s=Ve(n.upstreamExecutor,n.createChild,n.lastDone!=null?n.combineChildResults(n.lastDone,r):r,n.activeChildExecutors,n.combineChildResults,n.combineWithChildResult,n.onPull,n.onEmit);this.closeLastSubstream=t.close(_t(r),h+":950:54"),this.replaceSubexecutor(s);break}case"DrainChildExecutors":{const s=On(n.upstreamExecutor,n.lastDone!=null?n.combineChildResults(n.lastDone,r):r,n.activeChildExecutors,n.upstreamDone,n.combineChildResults,n.combineWithChildResult,n.onPull);this.closeLastSubstream=t.close(_t(r),h+":969:54"),this.replaceSubexecutor(s);break}}}pullFromChild(t,n,r,s){return qr(t,rt,i=>{const u=r(i);switch(u._tag){case"Yield":{const o=n.enqueuePullFromChild(s);this.replaceSubexecutor(o);break}case"Close":{this.finishWithDoneValue(t,n,u.value);break}}this.activeSubexecutor=zr(i,this.activeSubexecutor)},i=>{switch(i._tag){case"Failure":{const u=this.handleSubexecFailure(t,n,i.cause);return u!=null?Au(u,h+":1015:68"):void 0}case"Success":{this.finishWithDoneValue(t,n,i.value);return}}})}}function Kc(e,t,n){const r=new J(e);return Xt(r,t,n)}function Xt(e,t,n){const r=e.value;let s=e.previous;const i=r.upstream.run();switch(i._tag){case"Emit":{const u=r.onEmit(r.upstream.getEmit());return s==null?u==null?v(()=>t(),n):L(u,()=>t(),n):u==null?v(()=>Xt(s,t,n),n):L(u,()=>Xt(s,t,n),n)}case"Done":{const u=r.onDone(r.upstream.getDone());return s==null?u==null?v(()=>t(),n):L(u,()=>t(),n):u==null?v(()=>Xt(s,t,n),n):L(u,()=>Xt(s,t,n),n)}case"Effect":return s=new J(r,s),L(Wc(r.onEffect(i.effect),u=>v(()=>{const o=r.onDone(Tt(u));return o??$},n),n),()=>Xt(s,t,n),n);case"Read":return s=new J(r,s),s=new J(i,s),v(()=>Xt(s,t,n),n)}}const Gt="(@effect/core) _src/stream/Channel/operations/runScoped.ts";function Xp(e){return m(Dd(()=>p(()=>new $e(()=>e,void 0,rt),Gt+":14:19"),(t,n)=>{const r=t.close(n,Gt+":16:34");return r??$},Gt+":13:35"),t=>v(()=>as(t.run(),t),Gt+":19:44"),Gt+":19:12")}function as(e,t){for(;;)switch(e._tag){case"Effect":return L(e.effect,()=>as(t.run(),t),Gt+":31:44");case"Emit":{e=t.run();break}case"Done":return ut(()=>t.getDone(),Gt+":40:27");case"Read":return Kc(e,()=>as(t.run(),t),Gt+":43:28")}throw new Error("Bug")}var Qc,Vc;class Zp{constructor(t,n,r){this._fork=t,this._addFinalizerExit=n,this._close=r,this[Qc]=tc,this[Vc]=ec}}Qc=tc,Vc=ec;function Xc(e,t){return e._close(t)}function Yp(e,t){return m(gi(t),e,t)}function Jp(e,t,n){return Yp(r=>ze(e,()=>t(r),n),n)}const Ou="(@effect/core) _src/io/Scope/operations/extend.ts";function tm(e,t){return v(()=>Jp(t(),n=>n.merge(xt(nc.Tag,e)),Ou+":15:36"),Ou+":14:31")}function em(e,t,n,r){return wr(({restore:s})=>m(e(),i=>m(et(v(()=>s(()=>t(i),r),r),r),u=>Rt(v(()=>n(i,u),r),o=>wt(()=>cn(u,a=>Nt(a,o),()=>o),r),()=>ut(()=>u,r),r),r),r),r)}function nm(e,t,n){return em(()=>$,()=>e,(r,s)=>t(s),n)}const rm="(@effect/core) _src/io/Scope/operations/use.ts";function sm(e,t){return nm(tm(e,t),n=>Xc(e,()=>n),rm+":13:36")}class im{constructor(){this._tag="Sequential"}}const Zc=new im;function um(e){return e==null?E:A(e)}function om(e,t,n,r){return $i(e.ref.modify(s=>{switch(s._tag){case"Exited":return b($,s);case"Running":{const i=s.finalizers(),u=um(i.get(t));return i.delete(t),b(vt(u,()=>$,o=>s.update(o)(n)),new Fi(s.nextKey,i,s.update))}}},r),r)}function zu(e){return e+1}function am(e,t,n){return $i(e.ref.modify(r=>{switch(r._tag){case"Exited":return b(R(t(r.exit),()=>E,n),new Wn(zu(r.nextKey),r.exit,r.update));case"Running":{const s=r.finalizers().set(r.nextKey,t);return b(p(()=>A(r.nextKey),n),new Fi(zu(r.nextKey),s,r.update))}}},n),n)}function Pu(e,t,n){return R(am(e,t,n),r=>vt(r,()=>()=>$,s=>i=>om(e,s,i,n)),n)}const cm="(@effect/core) _src/io/Effect/operations/do.ts",cs=fm,lm=hm;function fm(e,t,n,r){return m(e,s=>R(n(s),i=>({...s,[t]:i}),r),r)}function hm(e,t,n,r){return R(e,s=>({...s,[t]:n(s)}),r)}function Yc(){return q({},cm+":119:27")}const dm=$p,Zt={running:!1,tasks:new kr};function Du(e){const t=Zt.tasks;Zt.tasks=new kr,t.forEach(n=>{n()}),Zt.tasks.isEmpty?Zt.running=!1:Jc(e)}function Jc(e=0){e>=2048?setTimeout(()=>Du(0),0):queueMicrotask(()=>Du(e+1))}function ls(e){Zt.tasks.add(e),Zt.running||(Zt.running=!0,Jc())}const ur=Symbol.for("@effect/core/io/Ref"),Ut="(@effect/core) _src/io/Ref/operations/_internal/RefInternal.ts",pm={get[ur](){return ur},getAndSet(e,t){return this.modify(n=>b(n,e),Ut+":17:23")},getAndUpdate(e,t){return this.modify(n=>b(n,e(n)),Ut+":25:23")},getAndUpdateSome(e,t){return this.modify(n=>b(n,nt(e(n),()=>n)),Ut+":34:23")},modifySome(e,t,n){return this.modify(r=>nt(t(r),()=>b(e,r)),Ut+":49:23")},update(e,t){return this.modify(n=>b(void 0,e(n)),Ut+":56:23")},updateAndGet(e,t){return this.modify(n=>{const r=e(n);return b(r,r)},Ut+":64:23")},updateSome(e,t){return this.modify(n=>b(void 0,nt(e(n),()=>n)),Ut+":76:23")},updateSomeAndGet(e,t){return this.modify(n=>{const r=nt(e(n),()=>n);return b(r,r)},Ut+":85:23")}},zn="(@effect/core) _src/io/Ref/operations/_internal/AtomicInternal.ts";class mm{constructor(t){this.value=t}get get(){return this.value.get}getAndSet(t){const n=this.value.get;return this.value.set(t),n}getAndUpdate(t){const n=this.value.get;return this.value.set(t(n)),n}getAndUpdateSome(t){const n=this.value.get,r=t(n);return st(r)&&this.value.set(r.value),n}modify(t){const n=this.value.get,{tuple:[r,s]}=t(n);return this.value.set(s),r}modifySome(t,n){const r=this.value.get,s=nt(n(r),()=>b(t,r));return this.value.set(s.get(1)),s.get(0)}set(t){return this.value.set(t)}setAsync(t){return ls(()=>this.value.set(t))}update(t){const n=this.value.get;this.value.set(t(n))}updateAndGet(t){const n=this.value.get,r=t(n);return this.value.set(r),r}updateSome(t){const n=this.value.get,r=t(n);st(r)&&this.value.set(r.value)}updateSomeAndGet(t){const n=this.value.get,r=t(n);return st(r)?(this.value.set(r.value),r.value):n}}const gm={...pm,get[ur](){return ur},get(e){return p(()=>this.unsafe.get,zn+":99:26")},modify(e,t){return p(()=>this.unsafe.modify(e),zn+":102:26")},set(e,t){return p(()=>this.unsafe.set(e),zn+":105:26")},setAsync(e,t){return p(()=>this.unsafe.setAsync(e),zn+":108:26")}},ym=bm;function bm(e,t,n){return Ei(r=>vt(e(r),()=>Ge($),he),()=>t,n)}const _m=Sm;function Sm(e,t,n){return ym(r=>(e(r),E),t,n)}const wm=vm;function vm(e){return Object.setPrototypeOf({unsafe:new mm(new ae(e))},gm)}class km{constructor(t){this.ref=t}}function xm(e){return new km(e)}const Em="(@effect/core) _src/io/Scope/ReleaseMap/operations/make.ts",Cm=p($m,Em+":9:35");function $m(){return xm(wm(new Fi(0,new Map,rt)))}const yt="(@effect/core) _src/io/Scope/operations/makeWith.ts",Im=tl;function tl(e){return R(Cm,t=>new Zp(Me(R(Cn(cs(cs(Yc(),"scope",()=>tl(()=>Zc),yt+":16:16"),"finalizer",({scope:n})=>Pu(t,r=>Xc(n,()=>r),yt+":17:59"),yt+":17:16"),({finalizer:n,scope:r})=>rc(r,n),yt+":18:15"),({scope:n})=>n,yt+":19:15"),yt+":20:27"),n=>yn(Pu(t,n,yt+":21:38"),yt+":21:54"),n=>v(()=>yn(dm(t,n(),e(),yt+":24:34"),yt+":24:68"),yt+":23:32")),yt+":12:29")}const Rm=Im(()=>Zc);function Am(e,t){return m(Rm,n=>sm(n,e),t)}const Mm="(@effect/core) _src/stream/Channel/operations/run.ts";function Fm(e){return Am(()=>Xp(e),Mm+":9:23")}function Lm(e){return Fm(Dh(e))}function Nm(e,t,n){return Lm(Ph(e.channel,()=>t().channel))}function Uu(e,t){return Nm(e,()=>Fh())}function qm(e,t){return R(qc(()=>Object.entries(e),([n,r])=>R(r,s=>[n,s],t),t),n=>{const r={};for(const[s,i]of n)r[s]=i;return r},t)}var Bu,Wu;const wn=Symbol.for("@effect/core/io/TraceElement");class Om{constructor(){this._tag="NoLocation",this[Bu]=wn}[(Bu=wn,g.sym)](){return I(this._tag)}[_.sym](t){return el(t)&&t._tag==="NoLocation"}}class zm{constructor(t,n,r){this.fileName=t,this.lineNumber=n,this.columnNumber=r,this._tag="SourceLocation",this[Wu]=wn}[(Wu=wn,g.sym)](){return k(I(this._tag),k(I(this.fileName),k(H(this.lineNumber),H(this.columnNumber))))}[_.sym](t){return el(t)&&this[g.sym]()===t[g.sym]()}}function el(e){return typeof e=="object"&&e!=null&&wn in e}const fs=new Om,Pm=fs;function Dm(e,t,n){return new zm(e,t,n)}const Um=/^(.*?):(\d*?):(\d*?)$/;function Ft(e){if(e){const t=e.match(Um);if(t){const n=t[1].trim(),r=Number.parseInt(t[2]),s=Number.parseInt(t[3]);return Dm(n,r,s)}return fs}return fs}function Bm(e){switch(e._tag){case"NoLocation":return"";case"SourceLocation":return`${e.fileName}:${e.lineNumber}:${e.columnNumber}`}}const Wm=new ee(0);function nl(e){return new uh(Wm.getAndIncrement(),Math.floor(new Date().getTime()/1e3),e)}var rl;const Gm=il,Tm=Gn,sl=Symbol.for("@tsplus/stdlib/service/Patch"),Hm={$:{}};class Rn{constructor(){this[rl]=sl}}rl=sl;class jm extends Rn{constructor(){super(),this._tag="Empty"}}class Km extends Rn{constructor(t,n){super(),this.tag=t,this.service=n,this._tag="AddService"}}class Qm extends Rn{constructor(t,n){super(),this.first=t,this.second=n,this._tag="AndThen"}}class Vm extends Rn{constructor(t){super(),this.tag=t,this._tag="RemoveService"}}class Xm extends Rn{constructor(t,n){super(),this.tag=t,this.update=n,this._tag="UpdateService"}}function Zm(e,t){const n={ref:!1},r=Ym(new Map(t.unsafeMap),We(e),n);if(!n.ref)return new xt(r);const s=new Map;for(const[i]of t.unsafeMap)r.has(i)&&(s.set(i,r.get(i)),r.delete(i));for(const[i,u]of r)s.set(i,u);return new xt(s)}function Ym(e,t,n){for(var r=e,s=t,i=n,u=e,o=t,a=n;;){if(z(s))return r;const c=s.head,l=s.tail;switch(c._tag){case"Empty":{u=r,o=l,a=i,r=u,s=o,i=a;continue}case"AddService":{u=r.set(c.tag,c.service),o=l,a=i,r=u,s=o,i=a;continue}case"AndThen":{u=r,o=wa(l,We(c.first,c.second)),a=i,r=u,s=o,i=a;continue}case"RemoveService":{u=(r.delete(c.tag),r),o=l,a=i,r=u,s=o,i=a;continue}case"UpdateService":{u=r.set(c.tag,c.update(r.get(c.tag))),o=l,a=(i.ref=!0,i),r=u,s=o,i=a;continue}}}}function il(){return new jm}function Gn(e,t){return new Qm(e,t)}function Jm(e,t){const n=new Map(e.unsafeMap);let r=il();for(const[s,i]of t.unsafeMap.entries())if(n.has(s)){const u=n.get(s);n.delete(s),u!==i&&(r=Gn(r,new Xm(s,()=>i)))}else n.delete(s),r=Gn(r,new Km(s,i));for(const[s]of n.entries())r=Gn(r,new Vm(s));return r}const tg={Tag:bn,Env:xt,Patch:Hm},ul=Symbol.for("@effect/core/io/Random"),eg={$:{},Tag:tg.Tag()};var ol;const Mt="(@effect/core) _src/io/Random/operations/live.ts",ng=W.make(()=>new sg(Math.random()*4294967296>>>0)),rg=ng;class sg{constructor(t){this.seed=t,this[ol]=ul,this.PRNG=new Ro(t)}get next(){return p(()=>this.PRNG.number(),Mt+":23:26")}get nextBoolean(){return m(this.next,t=>p(()=>t>.5,Mt+":27:51"),Mt+":27:29")}get nextInt(){return p(()=>this.PRNG.integer(0),Mt+":31:26")}nextRange(t,n,r){return m(this.next,s=>p(()=>(n-t)*s+t,Mt+":35:51"),Mt+":35:29")}nextIntBetween(t,n,r){return p(()=>this.PRNG.integer(n-t)+t,Mt+":43:26")}shuffle(t,n){return ig(t,r=>this.nextIntBetween(0,r,Mt+":50:62"),Mt+":50:23")}}ol=ul;function ig(e,t,n){return v(()=>{const r=e();return R(Cn(lm(cs(Yc(),"buffer",()=>p(()=>{const s=[];for(const i of r)s.push(i);return s},n),n),"swap",({buffer:s})=>(i,u)=>p(()=>{const o=s[i];return s[i]=s[u],s[u]=o,s},n),n),({buffer:s,swap:i})=>{const u=[];for(let o=s.length;o>=2;o=o-1)u.push(o);return Oc(()=>u,o=>m(t(o),a=>i(o-1,a),n),n)},n),({buffer:s})=>s,n)},n)}const al=Symbol.for("@effect/core/io/Clock"),ug={$:{},Scheduler:{},Tag:bn()},og=2**31-1,Gu={unsafeSchedule(e,t){if(t.millis>og)return Bf;let n=!1;const r=setTimeout(()=>{n=!0,e()},t.millis);return()=>(clearTimeout(r),!n)}};function ag(e){return new Ya(e,Jm,(t,n)=>Tm(t,n),t=>n=>Zm(t,n),Gm())}var cl;const be="(@effect/core) _src/io/Clock/operations/live.ts";class cg{constructor(){this[cl]=al}get currentTime(){return p(()=>this.unsafeCurrentTime,be+":7:26")}get unsafeCurrentTime(){return new Date().getTime()}get scheduler(){return p(()=>Gu,be+":15:26")}sleep(t,n){return m(p(t,be+":19:26"),r=>Yd(s=>{const i=Gu.unsafeSchedule(()=>s($),r);return Ge(p(i,be+":22:42"))},be+":20:28"),be+":19:44")}}cl=al;const ll=W.make(()=>xt(ug.Tag,new cg).add(eg.Tag,rg.value)),lg=ll,fg=W.make(()=>ag(ll.value));class de{constructor(t){this.internalMap=t}[Symbol.iterator](){const t=this.internalMap[Symbol.iterator]();return{next:()=>{const n=t.next();return n.done?{done:!0,value:void 0}:{done:!1,value:b(n.value[0],n.value[1])}}}}[_.sym](t){if(t instanceof de&&this.internalMap.size===t.internalMap.size){for(const[n,r]of t.internalMap)if(this.internalMap.has(n)){const s=this.internalMap.get(n);if(!F(s,r))return!1}else return!1;return!0}return!1}[g.sym](){let t=I("ImmutableMap");for(const n of this)t^=k(C(n.get(0)),C(n.get(1)));return Ps(t)}}function hs(e){const t=new Map;for(const{tuple:[n,r]}of e)t.set(n,r);return new de(t)}function hg(...e){return hs(e)}class Pi{constructor(t,n,r,s=()=>{},i=()=>{},u=()=>{}){this.value=t,this.unsafeOnStart=n,this.unsafeOnEnd=r,this.unsafeOnEffect=s,this.unsafeOnSuspend=i,this.unsafeOnResume=u}}class dg extends Pi{constructor(t){super(t,()=>{},()=>{})}}const tn=new dg($);function pg(e,t){switch(e._tag){case"Failure":return e;case"Success":return t(e.value)}}function Tn(e){return pg(e,rt)}function $r(e){const t=ti(U());for(const n of e)ht(t,n);return ei(t)}function fl(e){return At(hl(e))}function hl(e){switch(e._tag){case"None":return P(()=>ni());case"Runtime":return P(()=>$r([e.id]));case"Composite":{let t=P(()=>U());for(const n of e.fiberIds)t=hn(Z(()=>hl(n)),()=>t,(r,s)=>pr(r,s));return t}}}function mg(e,t){const n=U();return ri(n,r=>{mn(e,s=>{const i=t(s);bi(r,i)||ht(r,i)})})}function gg(e,t){const n=U();return ri(n,r=>{mn(e,s=>{for(const i of t(s))bi(r,i)||ht(r,i)})})}function Di(e,t,n){return Sa(e._keyMap,t,(r,s)=>n(r,s))}function yg(e){return Oe(_i(e,T(),(t,n)=>ii(n)?A(tt(t,n.value)):E))}function bg(e){return z(e)?E:A(e.head)}function Ir(e,t){return ft(e)?E:A(t(e.value))}const _g=e=>t=>Ir(t,e);function Sg(e,t){return nt(Ir(Fa(e),t),()=>{if(dc(e)){const n=Di(gg(pc(e),r=>mg(fl(r),s=>`#${s}`)),"",(r,s)=>`${r}, ${s}`);return new es(`Interrupted by fibers: ${n}`)}return nt(bg(yg(e)),()=>new es)})}const Tu="(@effect/core) _src/io/Metrics/definition.ts",Hu=Symbol.for("@effect/core/io/Metric"),wg=function(e,t,n){return Object.assign((s,i)=>Cn(s,u=>p(()=>t(u,U()),Tu+":56:39"),Tu+":56:17"),{[Hu]:Hu,keyType:e,unsafeUpdate:t,unsafeValue:n})};class Ui{constructor(t){this.millis=t}[_.sym](t){return t instanceof Ui&&this.millis===t.millis}[g.sym](){return H(this.millis)}}function vg(e,t){return e.millis<=t.millis}function kg(e,t){return e.millis===t.millis}function Rr(e,t){return vf(e,t,F)}var dl,ju,Ku,Qu,Vu,Xu;const pl=Symbol.for("@effect/core/io/Metric/MetricKeyType"),ds=Symbol.for("@effect/core/io/Metric/MetricKeyType/Counter"),ps=Symbol.for("@effect/core/io/Metric/MetricKeyType/Frequency"),ms=Symbol.for("@effect/core/io/Metric/MetricKeyType/Gauge"),gs=Symbol.for("@effect/core/io/Metric/MetricKeyType/Histogram"),ys=Symbol.for("@effect/core/io/Metric/MetricKeyType/Summary");class An{constructor(){this[dl]=pl}}dl=pl;class ml extends An{constructor(){super(...arguments),this[ju]=ds}[(ju=ds,g.sym)](){return I("ets/Metrics/MetricKeyType/Counter")}[_.sym](t){return Rg(t)}}class xg extends An{constructor(){super(...arguments),this[Ku]=ms}[(Ku=ms,g.sym)](){return I("ets/Metrics/MetricKeyType/Gauge")}[_.sym](t){return Ag(t)}}class gl extends An{constructor(){super(...arguments),this[Qu]=ps}[(Qu=ps,g.sym)](){return I("ets/Metrics/MetricKeyType/Frequency")}[_.sym](t){return Mg(t)}}class yl extends An{constructor(t){super(),this.boundaries=t,this[Vu]=gs}[(Vu=gs,g.sym)](){return k(I("ets/Metrics/MetricKeyType/Histogram"),C(this.boundaries))}[_.sym](t){return Fg(t)&&F(this.boundaries,t.boundaries)}}class Eg extends An{constructor(t,n,r,s){super(),this.maxAge=t,this.maxSize=n,this.error=r,this.quantiles=s,this[Xu]=ys}[(Xu=ys,g.sym)](){return k(I("ets/Metrics/MetricKeyType/Summary"),k(C(this.maxAge),k(H(this.maxSize),k(H(this.error),C(this.quantiles)))))}[_.sym](t){return Lg(t)&&kg(this.maxAge,t.maxAge)&&this.maxSize===t.maxSize&&this.error===t.error&&Rr(this.quantiles,t.quantiles)}}const Cg=new ml,$g=new gl;function Ig(e){return new yl(e)}function Rg(e){return typeof e=="object"&&e!=null&&ds in e}function Ag(e){return typeof e=="object"&&e!=null&&ms in e}function Mg(e){return typeof e=="object"&&e!=null&&ps in e}function Fg(e){return typeof e=="object"&&e!=null&&gs in e}function Lg(e){return typeof e=="object"&&e!=null&&ys in e}var Zu;const Ng=Pg,bs=Symbol.for("@effect/core/io/Metric/MetricKey");class Ar{constructor(t,n,r=U()){this.name=t,this.keyType=n,this.tags=r,this[Zu]=bs}[(Zu=bs,g.sym)](){return k(I(this.name),k(C(this.keyType),C(this.tags)))}[_.sym](t){return Dg(t)&&this.name===t.name&&C(this.keyType)===C(t.keyType)&&pa(this.tags,t.tags)}}function qg(e){return new Ar(e,Cg)}function Og(e){return new Ar(e,$g)}function zg(e,t){return new Ar(e,Ig(t))}function Pg(e,t){return mr(t)===0?e:new Ar(e.name,e.keyType,pr(e.tags,t))}function Dg(e){return typeof e=="object"&&e!=null&&bs in e}class Mr{constructor(t){this.array=t}[Symbol.iterator](){return this.array[Symbol.iterator]()}[_.sym](t){return t instanceof Mr&&this.array.length===t.array.length&&this.array.every((n,r)=>F(n,t.array[r]))}[g.sym](){return Lo(this.array)}}function Ug(e){return new Mr(Array.from(e))}function Bg(e,t){return new Mr(e.array.map((n,r)=>t(n,r)))}var Yu;const Ju=Symbol.for("@tsplus/stdlib/collections/mutable/MutableHashMap");class Wg{constructor(){this[Yu]=Ju,this.backingMap=new Map,this.length=new ee(0)}get size(){return this.length.get}get(t){const n=C(t),r=this.backingMap.get(n);if(r==null)return E;let s=r;for(;s;){if(F(t,s.k))return A(s.v);s=s.next}return E}remove(t){const n=C(t),r=this.backingMap.get(n);if(r==null)return this;if(F(t,r.k))return r.next!=null?this.backingMap.set(n,r.next):this.backingMap.delete(n),this.length.decrementAndGet(),this;let s=r.next,i=r;for(;s;){if(F(t,s.k))return i.next=s.next,this.length.decrementAndGet(),this;i=s,s=s.next}return this}set(t,n){const r=C(t),s=this.backingMap.get(r);if(s==null)return this.backingMap.set(r,new to(t,n)),this.length.incrementAndGet(),this;let i=s,u=s;for(;i;){if(F(t,i.k))return i.v=n,this;u=i,i=i.next}return this.length.incrementAndGet(),u.next=new to(t,n),this}update(t,n){const r=C(t),s=this.backingMap.get(r);if(s==null)return this;let i=s;for(;i;){if(F(t,i.k))return i.v=n(i.v),this;i=i.next}return this}[(Yu=Ju,Symbol.iterator)](){return Bg(Ug(this.backingMap.values()),t=>b(t.k,t.v))[Symbol.iterator]()}}class to{constructor(t,n,r){this.k=t,this.v=n,this.next=r}[Symbol.iterator](){let t=this,n=0;return{next:()=>{if(t){const r=b(t.k,t.v);return t=t.next,n++,{value:r,done:!1}}else return{value:n,done:!0}}}}}function Gg(){return new Wg}class Tg{constructor(t){this.unsafeUpdate=t}unsafeUpdateCache(t){return this.unsafeUpdate(t)}}function Hg(e,t){return{metricKey:e,metricState:t}}function _e(e){return ft(e)?void 0:e.value}var bl,eo,no,ro,so,io;const _l=Symbol.for("@effect/core/io/Metrics/MetricState"),_s=Symbol.for("@effect/core/io/Metrics/MetricState/Counter"),Ss=Symbol.for("@effect/core/io/Metrics/MetricState/Gauge"),ws=Symbol.for("@effect/core/io/Metrics/MetricState/Frequency"),vs=Symbol.for("@effect/core/io/Metrics/MetricState/Histogram"),ks=Symbol.for("@effect/core/io/Metrics/MetricState/Summary");class Mn{constructor(){this[bl]=_l}}bl=_l;class jg extends Mn{constructor(t){super(),this.count=t,this[eo]=_s}[(eo=_s,g.sym)](){return k(I("@effect/core/io/Metrics/MetricState/Counter"),H(this.count))}[_.sym](t){return ny(t)&&this.count===t.count}}class Kg extends Mn{constructor(t){super(),this.value=t,this[no]=Ss}[(no=Ss,g.sym)](){return k(I("@effect/core/io/Metrics/MetricState/Gauge"),H(this.value))}[_.sym](t){return ry(t)&&this.value===t.value}}class Qg extends Mn{constructor(t){super(),this.occurrences=t,this[ro]=ws}[(ro=ws,g.sym)](){return k(I("@effect/core/io/Metrics/MetricState/Frequency"),cr(this.occurrences[Symbol.iterator]()))}[_.sym](t){return sy(t)&&da(this.occurrences,t.occurrences)}}class Vg extends Mn{constructor(t,n,r,s,i){super(),this.buckets=t,this.count=n,this.min=r,this.max=s,this.sum=i,this[so]=vs}[(so=vs,g.sym)](){return k(I("@effect/core/io/Metrics/MetricState/Histogram"),k(C(this.buckets),k(H(this.count),k(H(this.min),k(H(this.max),H(this.sum))))))}[_.sym](t){return iy(t)&&Rr(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}}class Xg extends Mn{constructor(t,n,r,s,i,u){super(),this.error=t,this.quantiles=n,this.count=r,this.min=s,this.max=i,this.sum=u,this[io]=ks}[(io=ks,g.sym)](){return k(I("@effect/core/io/Metrics/MetricState/Summary"),k(H(this.error),k(C(this.quantiles),k(H(this.count),k(H(this.min),k(H(this.max),H(this.sum)))))))}[_.sym](t){return uy(t)&&this.error===t.error&&Rr(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}}function Zg(e){return new jg(e)}function Yg(e){return new Kg(e)}function Jg(e){return new Qg(e)}function ty(e,t,n,r,s){return new Vg(e,t,n,r,s)}function ey(e,t,n,r,s,i){return new Xg(e,t,n,r,s,i)}function ny(e){return typeof e=="object"&&e!=null&&_s in e}function ry(e){return typeof e=="object"&&e!=null&&Ss in e}function sy(e){return typeof e=="object"&&e!=null&&ws in e}function iy(e){return typeof e=="object"&&e!=null&&vs in e}function uy(e){return typeof e=="object"&&e!=null&&ks in e}function Fn(e,t){return{update:e,get:t}}function Xe(e,t){return{update:n=>(e.update(n),t(n)),get:e.get}}function oy(e){return e._editable=!1,e}function ay(e){const t=_a(ba());for(const n of e)ts(t,n.get(0),n.get(1));return oy(t)}function cy(...e){return ay(e)}const Sl=e=>({compare:e}),ly=Object.assign(e=>({equals:e}),{$:{}}),fy=dy;function hy(e,t){return Sl((n,r)=>e.compare(t(n),t(r)))}function dy(e){return(t,n)=>e.compare(t,n)===-1}const py=(e,t)=>e<t?-1:e>t?1:0,my=Sl(py),or=my;function xs(e,t){return kt(Array.from(e).sort((n,r)=>t.compare(n,r)))}function gy(e,t){if(e._typeId===Pe)return new Bs(t(0,e.a));let n=O(),r=0;for(const s of e)n=ot(n,t(r,s)),r+=1;return n}function Fr(){return new yy(O())}class yy{constructor(t){this.chunk=t}append(t){return this.chunk=ot(this.chunk,t),this}build(){return this.chunk}}function Es(e){return e._get(0)}function by(e){if(e.length===0)throw new Kt(1,1,e.length-1);return Ai(e,1)}function Bi(e,t,n){switch(e._typeId){case Pe:return n(t,e.a);case kn:{const r=e._arrayLike(),s=r.length;let i=t,u=0;for(;u<s;)i=n(i,r[u]),u++;return i}default:{const r=e._arrayLikeIterator();let s,i=t;for(;(s=r.next())&&!s.done;){const u=s.value,o=u.length;let a=0;for(;a<o;){const c=u[a];i=n(i,c),a++}}return i}}}function _y(e){return e._get(e.length-1)}function Sy(e,t){const n=e._arrayLikeIterator();let r,s=!0,i=0;for(;s&&(r=n.next())&&!r.done;){const u=r.value,o=u.length;let a=0;for(;s&&a<o;){const c=u[a];t(c)?s=!1:(i++,a++)}}return Mc(e,i)}function wy(e){let t=0;return Fn(n=>{t=t+n},()=>Zg(t))}function vy(e,t){let n=t;return Fn(r=>{n=r},()=>Yg(n))}function ky(e){const t=new Map,n=s=>{const i=t.get(s)??0;t.set(s,i+1)},r=()=>cy(...Array.from(t.entries()).map(([s,i])=>b(s,i)));return Fn(n,()=>Jg(r()))}function xy(e){const t=e.keyType.boundaries.values,n=t.length,r=Array(n+1),s=Array(n);let i=0,u=0,o=Number.MAX_VALUE,a=Number.MIN_VALUE;gy(xs(t,or),(f,d)=>{s[f]=d});const c=f=>{let d=0,y=n;for(;d!==y;){const w=Math.floor(d+(y-d)/2),M=s[w];f<=M?y=w:d=w,y===d+1&&(f<=s[d]?y=d:d=y)}r[d]=r[d]+1,i=i+1,u=u+f,f<o&&(o=f),f>a&&(a=f)},l=()=>{const f=Fr();let d=0,y=0;for(;d!=n;){const w=s[d],M=r[d];y=y+M,f.append(b(w,y)),d=d+1}return f.build()};return Fn(c,()=>ty(l(),i,o,a,u))}function Ey(e){const{error:t,maxAge:n,maxSize:r,quantiles:s}=e.keyType,i=xs(s,or),u=Array(r);let o=0,a=0,c=0,l=Number.MAX_VALUE,f=Number.MIN_VALUE;const d=w=>{const M=Fr();let N=0;for(;N!==r-1;){const G=u[N];if(G!=null){const{tuple:[gt,Vt]}=G,je=new Ui(w-gt);je.millis>=0&&vg(je,n)&&M.append(Vt)}N=N+1}return Cy(t,i,xs(M.build(),or))},y=(w,M)=>{if(r>0){o=o+1;const N=o%r;u[N]=b(M,w)}a=a+1,c=c+w,w<l&&(l=w),w>f&&(f=w)};return Fn(({tuple:[w,M]})=>y(w,M),()=>ey(t,d(Date.now()),a,l,f,c))}class Pn{constructor(t,n,r,s){this.quantile=t,this.value=n,this.consumed=r,this.rest=s}}function Cy(e,t,n){const r=n.length;if(fn(t))return O();const s=Es(t),i=by(t),u=Bi(i,Ri(uo(e,r,E,0,s,n)),(o,a)=>{const c=Es(o);return ot(o,uo(e,r,c.value,c.consumed,a,c.rest))});return De(u,o=>b(o.quantile,o.value))}function uo(e,t,n,r,s,i){for(var u=e,o=t,a=n,c=r,l=s,f=i,d=e,y=t,w=n,M=r,N=s,G=i;;){if(fn(f))return new Pn(l,E,c,O());if(l===1)return new Pn(l,A(_y(f)),c+f.length,O());const gt=Sy(f,Lr=>Lr>Es(f)),Vt=l*o,je=u/2*Vt,pe=c+gt.get(0).length,Hl=Math.abs(pe-Vt);if(pe<Vt-je){d=u,y=o,w=Fe(f),M=pe,N=l,G=gt.get(1),u=d,o=y,a=w,c=M,l=N,f=G;continue}if(pe>Vt+je)return new Pn(l,a,c,f);switch(a._tag){case"None":{d=u,y=o,w=Fe(f),M=pe,N=l,G=gt.get(1),u=d,o=y,a=w,c=M,l=N,f=G;continue}case"Some":{const Lr=Math.abs(Vt-a.value);if(Hl<Lr){d=u,y=o,w=Fe(f),M=pe,N=l,G=gt.get(1),u=d,o=y,a=w,c=M,l=N,f=G;continue}return new Pn(l,A(a.value),c,f)}}}}function Ze(e,t){return st(e.get(t))}class $y{constructor(){this.map=Gg(),this.listeners=new Set,this.listener=new Tg(t=>n=>{for(const r of this.listeners)r.unsafeUpdate(t)(n)})}installListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}snapshot(){const t=[];for(const{tuple:[n,r]}of this.map)t.push(Hg(n,r.get()));return $r(t)}get(t){const n=_e(this.map.get(t));if(n==null){if(t.keyType instanceof ml)return this.getCounter(t);if(t.keyType instanceof xg)return this.getGauge(t);if(t.keyType instanceof gl)return this.getFrequency(t);if(t.keyType instanceof yl)return this.getHistogram(t);if(t.keyType instanceof Eg)return this.getSummary(t);throw new Error("Bug, unknown MetricKeyType")}else return n}getCounter(t){let n=_e(this.map.get(t));if(n==null){const r=this.listener.unsafeUpdate(t),s=Xe(wy(),r);Ze(this.map,t)||this.map.set(t,s),n=s}return n}getGauge(t){let n=_e(this.map.get(t));if(n==null){const r=this.listener.unsafeUpdate(t),s=Xe(vy(t,0),r);Ze(this.map,t)||this.map.set(t,s),n=s}return n}getFrequency(t){let n=_e(this.map.get(t));if(n==null){const r=this.listener.unsafeUpdate(t),s=Xe(ky(),r);Ze(this.map,t)||this.map.set(t,s),n=s}return n}getHistogram(t){let n=_e(this.map.get(t));if(n==null){const r=this.listener.unsafeUpdate(t),s=Xe(xy(t),r);Ze(this.map,t)||this.map.set(t,s),n=s}return n}getSummary(t){let n=_e(this.map.get(t));if(n==null){const r=this.listener.unsafeUpdate(t),s=Xe(Ey(t),r);Ze(this.map,t)||this.map.set(t,s),n=s}return n}}const Iy=W.make(()=>new $y);function Wi(e){const t=n=>{const r=Ng(e,n);return Iy.value.get(r)};return wg(e.keyType,(n,r)=>t(r).update(n),n=>t(n).get())}function wl(e){return Wi(Og(e))}function Gi(e){return Wi(qg(e))}function Ry(){return ly((e,t)=>e===t)}const Ay=Ry();function My(e,t,n){const r=s=>t.equals(s,n);for(let s=0;s<e.length;s++)if(r(Mi(e,s)))return!0;return!1}function Fy(e,t){let n=O();for(let r=0;r<e.length;r++){const s=Mi(e,r);My(n,t,s)||(n=ot(n,s))}return e.length===n.length?e:n}var oo;const Cs=Symbol.for("@effect/core/io/Metrics/Histogram/Boundaries");class Ly{constructor(t){this.values=t,this[oo]=Cs}[(oo=Cs,g.sym)](){return k(I("ets/Metrics/Histogram/Boundaries"),C(this.values))}[_.sym](t){return Oy(t)&&Rr(this.values,t.values)}}function Ny(e){return new Ly(Fy(Ae(e,Ri(Number.MAX_VALUE)),Ay))}function qy(e,t,n){return Ny(De(vc(0,n-1),r=>e*Math.pow(t,r)))}function Oy(e){return typeof e=="object"&&e!=null&&Cs in e}function zy(e,t){return Wi(zg(e,t))}var ao,co,lo;const oe=Symbol.for("@effect/core/Fiber/FiberStatus");class Py{constructor(){this._tag="Done",this[ao]=oe}[(ao=oe,g.sym)](){return I(this._tag)}[_.sym](t){return Ti(t)&&t._tag==="Done"}}class vl{constructor(t){this.interrupting=t,this._tag="Running",this[co]=oe}[(co=oe,g.sym)](){return k(I(this._tag),C(this.interrupting))}[_.sym](t){return Ti(t)&&t._tag==="Running"&&this.interrupting===t.interrupting}}class kl{constructor(t,n,r,s,i){this.interrupting=t,this.interruptible=n,this.asyncs=r,this.blockingOn=s,this.asyncTrace=i,this._tag="Suspended",this[lo]=oe}[(lo=oe,g.sym)](){return k(I(this._tag),k(C(this.interrupting),k(C(this.interruptible),k(H(this.asyncs),k(C(this.blockingOn),C(this.asyncTrace))))))}[_.sym](t){return Ti(t)&&t._tag==="Suspended"&&this.interrupting===t.interrupting&&this.interruptible===t.interruptible&&this.asyncs===t.asyncs&&F(this.blockingOn,t.blockingOn)}}function Ti(e){return typeof e=="object"&&e!=null&&oe in e}const Dy=new Py;function $s(e){return new vl(e)}function Uy(e,t,n,r,s){return new kl(e,t,n,r,s)}function By(e){switch(e._tag){case"Done":return!1;case"Running":return e.interrupting;case"Suspended":return e.interrupting}}function Wy(e,t){switch(e._tag){case"Done":return e;case"Running":return new vl(t);case"Suspended":return new kl(t,e.interruptible,e.asyncs,e.blockingOn,e.asyncTrace)}}const Is={_tag:"Empty"},Gy={_tag:"Pending"};function Ty(e){return{_tag:"Registered",asyncCanceler:e}}class xl{constructor(t,n,r,s,i,u){this.status=t,this.observers=n,this.suppressed=r,this.interruptors=s,this.asyncCanceler=i,this.mailbox=u,this._tag="Executing"}}class Hy{constructor(t){this.value=t,this._tag="Done",this.suppressed=Ot,this.status=Dy,this.interruptors=U()}}function dt(e,t,n,r,s,i){return new xl(e,t,n,r,s,i)}function jy(e){return new Hy(e)}function Ky(){return new xl($s(!1),T(),Ot,U(),Is,void 0)}function Qy(e){return By(e.status)}function Dr(e){return Di(e.interruptors,Ot,(t,n)=>Nt(t,li(n)))}function El(e){return e.internalMap.size}const Cl=Symbol.for("@effect/core/io/FiberRefs");var $l;class Il{constructor(t){this.fiberRefLocals=t,this[$l]=Cl}}$l=Cl;function fo(e){return new Il(e)}function Vy(e,t){return new Vh((n,r)=>b(void 0,e(n,r)),t)}const Rl={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4},Xy={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4},ho=W.make(()=>Te(Rl)),po=W.make(()=>Te(T()));function Zy(){return new de(new Map)}const mo=W.make(()=>Te(Zy()));function Al(e){const t=new Map;for(const[n,r]of e.internalMap)t.set(n,r);return new de(t)}function go(e,t){const n=Al(e).internalMap;return n.delete(t),new de(n)}function Rs(e,t,n){const r=Al(e).internalMap;return r.set(t,n),new de(r)}function As(e){return e._initial}function Ms(e,t){return e.internalMap.has(t)?A(e.internalMap.get(t)):E}function Yy(e,t){return nb(e,t,!1)}function Jy(e,t,n){for(;;){if(z(e))return j();if(t(e.head)!==n)return tb(e,e.tail,t,n);e=e.tail}}function tb(e,t,n,r){for(;;){if(z(t))return e;if(n(t.head)!==r)t=t.tail;else return eb(e,t,n,r)}}function eb(e,t,n,r){const s=K(pt(e),j());let i=Ct(e),u=s;for(;i!==t;){const c=K(pt(i),j());u.tail=c,u=c,i=i.tail}let o=t.tail,a=o;for(;!z(o);){const c=pt(o);if(n(c)!==r)o=o.tail;else{for(;a!==o;){const l=K(pt(a),j());u.tail=l,u=l,a=a.tail}a=o.tail,o=o.tail}}return z(a)||(u.tail=a),s}function nb(e,t,n){return Jy(e,t,n)}function rb(e,t){let n=e;for(;!z(n);)t(n.head),n=n.tail}function sb(e,t){return Bi(e,"",(n,r)=>n.length>0?`${n}${t}${r}`:r)}function Fs(e){return`effect-ts-fiber-${sb(De(kt(fl(e)),n=>`${n}`),",")}`}function Ur(e,t){return e===t?!0:_i(e,!1,(n,r)=>A(n||F(r,t)))}function ib(e,t){switch(e._tag){case"Failure":return new Sr(t(e.cause));case"Success":return e}}function ub(e){return e._fork}const Ml=ob;function ob(e,t){return n=>e._patch(t)(n)}const Ye=W.make(()=>Te(E,()=>E));function ab(e,t){return ft(e)?t():e}function Fl(e,t){switch(e._tag){case"None":return t;case"Runtime":switch(t._tag){case"None":return e;case"Runtime":return new Nn($r([e,t]));case"Composite":return new Nn(ht(t.fiberIds,e))}case"Composite":switch(t._tag){case"None":return e;case"Runtime":return new Nn(ht(e.fiberIds,t));case"Composite":return new Nn(pr(e.fiberIds,t.fiberIds))}}}function cb(e){return Di(e,Be,(t,n)=>Fl(t,n))}function lb(e){return st(pi(e,t=>ii(t)&&t.trace!==Ht||Ea(t)&&t.trace!==Ht||ui(t)&&t.trace!==Ht?A(void 0):E))}function fb(e,t){return ga(Fl(e.fiberId,t.fiberId),Ae(e.stackTrace,t.stackTrace))}function hb(e,t){return Ci(e,()=>Ot,(n,r)=>new Ca(n,t(r)),(n,r)=>new oi(n,t(r)),(n,r)=>new ai(n,t(r)),(n,r)=>new Wt(n,r),(n,r)=>new gr(n,r),(n,r)=>new ci(n,r))}function db(e,t){return hb(e,n=>fb(n,t))}function pb(e,t,n){return m(e,r=>R(t(),s=>b(r,s),n),n)}const mb="(@effect/core) _src/io/Supervisor/operations/and.ts";function gb(e,t){return new Pi(pb(e.value,()=>t.value,mb+":14:19"),(n,r,s,i)=>{try{e.unsafeOnStart(n,r,s,i)}finally{t.unsafeOnStart(n,r,s,i)}},(n,r)=>{e.unsafeOnEnd(n,r),t.unsafeOnEnd(n,r)},(n,r)=>{e.unsafeOnEffect(n,r),t.unsafeOnEffect(n,r)},n=>{e.unsafeOnSuspend(n),t.unsafeOnSuspend(n)},n=>{e.unsafeOnSuspend(n),t.unsafeOnSuspend(n)})}function Ls(e){return{value:e}}function yb(e,t,n){return e._diff(t,n)}function bb(e,t,n){return e._combine(t,n)}function _b(e,t){const n=e.fiberRefLocals,r=t.fiberRefLocals,s=Bi(kt(r),n,(i,{tuple:[u,o]})=>{const a=nt(Ms(i,u),()=>T()),c=Sb(u,a,o),l=Oe(Yn(c.tail,b(c.head,T()),({tuple:[d,y]},w)=>b(w,K(yb(u,d,w),y))).get(1));if(z(l))return i;let f;if(z(a))f=E;else{const d=Yn(l.tail,l.head,(N,G)=>bb(u,N,G)),{tuple:[y,w]}=a.head,M=a.tail;f=A(K(b(y,Ml(u,d)(w)),M))}return vt(f,()=>i,d=>Rs(i,u,d))});return new Il(s)}function Sb(e,t,n){return wb(Oe(t),Oe(n),As(e),As(e))}function wb(e,t,n,r){for(var s=e,i=t,u=n,o=r,a=e,c=t,l=n,f=r;;){if(z(s)||z(i))return K(o,ln(i,gt=>gt.get(1)));const{tuple:[d,y]}=s.head,w=s.tail,{tuple:[M,N]}=i.head,G=i.tail;if(F(d,M)){a=w,c=G,l=y,f=N,s=a,i=c,u=l,o=f;continue}return d.id<M.id?tt(tt(tt(ln(i,gt=>gt.get(1)),N),o),u):tt(tt(ln(i,gt=>gt.get(1)),N),o)}}class vb{constructor(){this.last=void 0,this.builder=Fr()}append(t){t!=null&&t!==this.last&&t!==Pm&&(this.builder.append(t),this.last=t)}build(){return this.builder.build()}}function kb(){return new vb}var Ll;const S="(@effect/core) _src/io/Fiber/_internal/context.ts",yo=W.make(()=>wl("effect_fiber_failure_causes")),xb=W.make(()=>wl("effect_fiber_fork_locations")),Eb=W.make(()=>Gi("effect_fiber_started")),Cb=W.make(()=>Gi("effect_fiber_successes")),$b=W.make(()=>Gi("effect_fiber_failures")),Ib=W.make(()=>{const e=qy(1,2,100);return zy("effect_fiber_lifetimes",e)});class Rb{constructor(t,n){this.apply=t,this.trace=n,this._tag="InterruptExit"}}class Ab{constructor(t,n,r){this.finalizer=t,this.handleInterrupts=n,this.trace=r,this._tag="Finalizer"}apply(t){return this.handleInterrupts(),R(this.finalizer,()=>t,this.finalizer.trace)}}class Br{constructor(t,n){this.apply=t,this.trace=n,this._tag="ApplyFrame"}}const Mb=new Ii(!1),bo=new ae(null);class Hi{constructor(t,n,r,s,i){this._id=t,this.childFibers=n,this._tag="RuntimeFiber",this[Ll]=ac,this.state=new ae(Ky()),this.asyncEpoch=0,this.stack=void 0,this.nextEffect=void 0,this._location=this._id.location,this.interruptExit=new Rb(u=>this.unsafeIsInterruptible?(this.popInterruptStatus(),q(u,S+":391:43")):p(()=>(this.popInterruptStatus(),u),S+":394:23")),this.fiberRefLocals=r,this.runtimeConfig=s,this.interruptStatus=i,this.trackMetrics&&(Eb.value.unsafeUpdate(1,U()),xb.value.unsafeUpdate(Bm(this._location),U()))}get fiberId(){return this._id}get _await(){return Ei(t=>{const n=s=>t(ut(()=>s,S+":115:67")),r=this.unsafeAddObserverMaybe(n);return r==null?Ge(p(()=>this.unsafeRemoveObserver(n),S+":119:37")):he(q(r,S+":120:41"))},()=>this.fiberId,S+":114:43")}get _children(){return this._evalOnEffect(p(()=>{const t=Fr();for(const n of this.childFibers)t.append(n);return t.build()},S+":126:21"),p(()=>O(),S+":133:21"))}get _inheritRefs(){return v(()=>{if(El(this.fiberRefLocals)===0)return $;const t=fo(this.fiberRefLocals);return Vy((n,r)=>_b(r,t),S+":145:36")},S+":138:33")}get _poll(){return p(()=>this.unsafePoll(),S+":150:26")}_interruptAs(t){return this.unsafeInterruptAs(t)}get _scope(){return Rd(this)}get _status(){return p(()=>this.state.get.status,S+":168:26")}get _trace(){return p(()=>this.unsafeCaptureTrace([]),S+":172:26")}_evalOn(t,n){return v(()=>this.unsafeEvalOn(t)?$:yn(n,S+":180:60"),S+":179:33")}_evalOnEffect(t,n){return m(gi(S+":188:30"),r=>m(Ac(S+":189:20"),s=>L(this._evalOn(rs(ze(t,()=>r,S+":191:36"),()=>s,S+":191:62"),rs(ze(n,()=>r,S+":192:36"),()=>s,S+":192:62")),()=>s.await(S+":193:34"),S+":193:19"),S+":189:38"),S+":188:43")}unsafeGetDescriptor(){return{id:this.fiberId,status:this.state.get.status,interrupters:this.state.get.interruptors,interruptStatus:gu(this.unsafeIsInterruptible)}}get trackMetrics(){return we(this.runtimeConfig.value.flags,Cd)}observeFailure(t){this.trackMetrics&&yo.value.unsafeUpdate(t,U())}unsafeLog(t,n){const r=this.unsafeGetRef(ho.value),s=this.unsafeGetRef(po.value),i=this.unsafeGetRef(mo.value),u=this.unsafeGetRefs(this.fiberRefLocals);mn(this.runtimeConfig.value.loggers,o=>{o.apply(Ft(n),this.fiberId,r,t,()=>Ot,u,s,i)})}unsafeLogWith(t,n,r,s=null,i=null,u){const o=nt(r,()=>this.unsafeGetRef(ho.value)),a=this.unsafeGetRef(po.value),c=this.unsafeGetRef(mo.value);let l=this.unsafeGetRefs(this.fiberRefLocals);s!=null&&(i==null?l=go(l,s):l=Rs(l,s,i)),mn(this.runtimeConfig.value.loggers,f=>{f.apply(Ft(u),this.fiberId,o,t,n,l,a,c)})}get isStackEmpty(){return this.stack==null}pushContinuation(t){this.stack=new J(t,this.stack)}popContinuation(){if(this.stack){const t=this.stack.value;return this.stack=this.stack.previous,t}}unsafeNextEffect(t){if(!this.isStackEmpty){const n=this.popContinuation();return n._tag==="Fold"?n.success(t):n.apply(t)}return this.unsafeTryDone(_t(t))}unsafeUnwindStack(){let t=!0,n=!1;for(;t&&!this.isStackEmpty;){const r=this.popContinuation();switch(r._tag){case"InterruptExit":{this.popInterruptStatus();break}case"Finalizer":{this.unsafeDisableInterrupting(),this.pushContinuation(new Br(s=>Rt(r.finalizer,i=>(this.popInterruptStatus(),this.unsafeAddSuppressed(i),se(s,S+":352:45")),()=>(this.popInterruptStatus(),se(s,S+":356:45")),S+":348:46"))),t=!1;break}case"Fold":{this.unsafeShouldInterrupt?n=!0:(this.pushContinuation(new Br(r.failure,r.trace)),t=!1);break}}}return n}pushInterruptStatus(t){this.interruptStatus=new J(t,this.interruptStatus)}popInterruptStatus(){if(this.interruptStatus){const t=this.interruptStatus.value;return this.interruptStatus=this.interruptStatus.previous,t}}unsafeInterruptAs(t){const n=li(t);return v(()=>{const r=this.state.get;if(r._tag==="Executing"&&r.status._tag==="Suspended"&&r.status.interruptible&&r.asyncCanceler._tag==="Registered"){const s=dt($s(!0),r.observers,r.suppressed,ht(r.interruptors,t),Is,r.mailbox);this.state.set(s);const i=wt(()=>n,S+":438:43"),u=r.asyncCanceler.asyncCanceler,o=u===$?i:L(u,()=>i,S+":440:90");this.unsafeRunLater(o)}else if(r._tag==="Executing"){const s=Nt(r.suppressed,n),i=dt(r.status,r.observers,s,ht(r.interruptors,t),r.asyncCanceler,r.mailbox);this.state.set(i)}return this._await},S+":418:33")}unsafeSetInterrupting(t){const n=this.state.get;n._tag==="Executing"&&this.state.set(dt(Wy(n.status,t),n.observers,n.suppressed,n.interruptors,n.asyncCanceler,n.mailbox))}unsafeDisableInterrupting(){this.interruptStatus=new J(!1,this.interruptStatus)}unsafeRestoreInterrupt(){this.stack=new J(this.interruptExit,this.stack)}get unsafeIsInterrupted(){return mr(this.state.get.interruptors)>0}get unsafeIsInterruptible(){return this.interruptStatus?this.interruptStatus.value:!0}get unsafeIsInterrupting(){return Qy(this.state.get)}get unsafeShouldInterrupt(){return this.unsafeIsInterrupted&&this.unsafeIsInterruptible&&!this.unsafeIsInterrupting}unsafeGetRef(t){return nt(Ir(Ms(this.fiberRefLocals,t),n=>n.head.get(1)),()=>As(t))}unsafeGetRefs(t){const n=[];for(const{tuple:[r,s]}of t)n.push(b(r,s.head.get(1)));return hs(n)}unsafeSetRef(t,n){const r=nt(Ms(this.fiberRefLocals,t),()=>T()),s=z(r)?K(b(this._id,n),j()):K(b(this._id,n),r.tail);this.fiberRefLocals=Rs(this.fiberRefLocals,t,s)}unsafeDeleteRef(t){this.fiberRefLocals=go(this.fiberRefLocals,t)}unsafeAddObserverMaybe(t){const n=this.state.get;switch(n._tag){case"Executing":{this.state.set(dt(n.status,tt(n.observers,t),n.suppressed,n.interruptors,n.asyncCanceler,n.mailbox));return}case"Done":return n.value}}unsafeRemoveObserver(t){const n=this.state.get;if(n._tag==="Executing"){const r=Yy(n.observers,s=>s!==t);this.state.set(dt(n.status,r,n.suppressed,n.interruptors,n.asyncCanceler,n.mailbox))}}unsafeNotifyObservers(t,n){if(ct(n)>0){const r=_t(t);rb(n,s=>s(r))}}unsafeReportUnhandled(t,n){if(t._tag==="Failure")try{this.unsafeLogWith(()=>`Fiber ${Fs(this.fiberId)} did not handle an error`,()=>t.cause,A(Xy),null,null,n)}catch(r){this.runtimeConfig.value.fatal(r)?this.runtimeConfig.value.reportFatal(r):console.log(`An exception was thrown by a logger:
${r}`)}}unsafeAddSuppressed(t){if(!ph(t)){const n=this.state.get;if(n._tag==="Executing"){const r=dt(n.status,n.observers,Nt(n.suppressed,t),n.interruptors,n.asyncCanceler,n.mailbox);this.state.set(r)}}}unsafeClearSuppressed(){const t=this.state.get;switch(t._tag){case"Executing":{const n=dt(t.status,t.observers,Ot,t.interruptors,t.asyncCanceler,t.mailbox);this.state.set(n);const r=Dr(t);return Ur(t.suppressed,r)?t.suppressed:Nt(t.suppressed,r)}case"Done":return Dr(t)}}unsafeAddChild(t){return this.unsafeEvalOn(p(()=>this.childFibers.add(t),S+":665:44"))}unsafePoll(){const t=this.state.get;return t._tag==="Done"?A(t.value):E}unsafeCaptureTrace(t){const n=kb();if(t.forEach(r=>n.append(r)),this.stack!=null){const r=this.stack,s=[r.value];let i=r.previous;for(;i!=null;)s.unshift(i.value),i=i.previous;s.forEach(u=>n.append(Ft(u.trace)))}return new ma(this.fiberId,n.build())}unsafeEnterAsync(t,n,r){const s=this.state.get;if(s._tag==="Executing"&&s.status._tag==="Running"&&s.asyncCanceler._tag==="Empty"){const i=Uy(s.status.interrupting,this.unsafeIsInterruptible&&!this.unsafeIsInterrupting,t,n,r),u=dt(i,s.observers,s.suppressed,s.interruptors,Gy,s.mailbox);this.state.set(u)}else throw new zh(`Fiber ${Fs(this.fiberId)} is not running`)}unsafeExitAsync(t){const n=this.state.get;if(n._tag==="Executing"&&n.status._tag==="Suspended"&&n.status.asyncs===t){const r=dt($s(n.status.interrupting),n.observers,n.suppressed,n.interruptors,Is,n.mailbox);return this.state.set(r),!0}return!1}unsafeCreateAsyncResume(t){return n=>{this.unsafeExitAsync(t)&&this.unsafeRunLater(n)}}unsafeSetAsyncCanceler(t,n){const r=this.state.get,s=n??$;if(r._tag==="Executing"&&r.status._tag==="Suspended"&&r.asyncCanceler._tag==="Pending"&&t===r.status.asyncs)this.state.set(dt(r.status,r.observers,r.suppressed,r.interruptors,Ty(s),r.mailbox));else if(r._tag==="Executing"&&r.status._tag==="Suspended"&&r.asyncCanceler._tag==="Registered"&&t===r.status.asyncs)throw new Error("Bug, inconsistent state in unsafeSetAsyncCanceler")}unsafeAddFinalizer(t){this.pushContinuation(new Ab(t,()=>{this.unsafeDisableInterrupting(),this.unsafeRestoreInterrupt()}))}unsafeEvalOn(t){const n=this.state.get;switch(n._tag){case"Executing":{const r=n.mailbox==null?t:L(n.mailbox,()=>t,S+":823:89");return this.state.set(dt(n.status,n.observers,n.suppressed,n.interruptors,n.asyncCanceler,r)),!0}case"Done":return!1}}unsafeTryDone(t){const n=this.state.get;switch(n._tag){case"Executing":if(n.mailbox!=null){const r=dt(n.status,n.observers,n.suppressed,n.interruptors,n.asyncCanceler,void 0);return this.state.set(r),this.unsafeSetInterrupting(!0),L(n.mailbox,()=>ut(()=>t,S+":864:67"),S+":864:55")}else if(this.childFibers.size===0){const r=Dr(n),s=r===Ot?t:ib(t,a=>Ur(a,r)?a:Nt(a,r));this.state.set(jy(s)),this.unsafeReportUnhandled(s),this.unsafeNotifyObservers(s,n.observers);const i=this._id.startTimeSeconds,o=new Date().getTime()/1e3-i;this.trackMetrics&&Ib.value.unsafeUpdate(o,U()),cn(s,a=>(this.trackMetrics&&$b.value.unsafeUpdate(1,U()),Ci(a,()=>yo.value.unsafeUpdate("<empty>",U()),(c,l)=>{this.observeFailure(typeof c=="object"?c.constructor.name:"<anonymous>")},(c,l)=>{this.observeFailure(typeof c=="object"?c.constructor.name:"<anonymous>")},()=>{this.observeFailure("InterruptedException")},Un,Un,Un)),()=>{this.trackMetrics&&Cb.value.unsafeUpdate(1,U())});return}else{this.unsafeSetInterrupting(!0);let r=$;for(const s of this.childFibers)r=L(r,()=>s._interruptAs(this._id),S+":931:59");return this.childFibers.clear(),L(r,()=>ut(()=>t,S+":936:68"),S+":936:56")}case"Done":return}}unsafeDrainMailbox(){const t=this.state.get;switch(t._tag){case"Executing":{const n=dt(t.status,t.observers,t.suppressed,t.interruptors,t.asyncCanceler,void 0);return this.state.set(n),t.mailbox}case"Done":return}}unsafeOnDone(t){const n=this.unsafeAddObserverMaybe(t);n!=null&&t(_t(n))}unsafeFork(t,n,r=E){const s=nl(n),i=[];for(const{tuple:[f,d]}of this.fiberRefLocals){const y=Ml(f,ub(f))(d.head.get(1));i.push(b(f,tt(d,b(s,y))))}const u=hs(i),o=nt(ab(r,()=>this.unsafeGetRef(Ye.value)),()=>this._scope),a=new Set,c=new Hi(s,a,u,this.runtimeConfig,new J(this.interruptStatus?this.interruptStatus.value:!0));this.runtimeConfig.value.supervisor!==tn&&(this.runtimeConfig.value.supervisor.unsafeOnStart(this.unsafeGetRef(En.value),t,A(this),c),c.unsafeOnDone(f=>this.runtimeConfig.value.supervisor.unsafeOnEnd(Tn(f),c)));const l=o.unsafeAdd(this.runtimeConfig,c,S+":1024:47")?t:tr(()=>o.fiberId,S+":1025:27");return c.nextEffect=l,ls(()=>c.runUntil(this.runtimeConfig.value.maxOp)),c}complete(t,n,r,s,i){s.compareAndSet(!0,!1)&&i(r(t,n))}unsafeRace(t,n){const r=new Ii(!0),s=this.unsafeFork(t.left(),n),i=this.unsafeFork(t.right(),n);return _m(u=>{s.unsafeAddObserverMaybe(()=>this.complete(s,i,t.leftWins,r,u))!=null?this.complete(s,i,t.leftWins,r,u):i.unsafeAddObserverMaybe(()=>this.complete(i,s,t.rightWins,r,u))!=null&&this.complete(i,s,t.rightWins,r,u)},cb($r([s.fiberId,i.fiberId])),S+":1056:34")}unsafeRunLater(t){this.nextEffect=t,ls(()=>this.runUntil(this.runtimeConfig.value.maxOp))}runUntil(t){try{const n=this.runtimeConfig.value.flags,r=we(n,xd);let s=this.nextEffect;this.nextEffect=void 0;const i=we(n,Ed)&&this.runtimeConfig.value.supervisor!==tn;for(we(n,vu)&&bo.set(this),this.runtimeConfig.value.supervisor!==tn&&this.runtimeConfig.value.supervisor.unsafeOnResume(this);s!=null;)try{let u=0;do{if(this.unsafeShouldInterrupt){const o=s.trace;s=wt(()=>this.unsafeClearSuppressed(),o),this.unsafeSetInterrupting(!0)}else{const o=this.unsafeDrainMailbox();if(o!=null){const a=s;s=m(o,()=>a,S+":1118:54")}else if(u===t)this.unsafeRunLater(s),s=void 0;else switch(r&&this.unsafeLog(()=>s.unsafeLog(),s.trace),i&&this.runtimeConfig.value.supervisor.unsafeOnEffect(this,s),s._tag){case"FlatMap":{this.pushContinuation(new Br(s.k,s.trace)),s=s.effect;break}case"SucceedNow":{s=this.unsafeNextEffect(s.value);break}case"Succeed":{s=this.unsafeNextEffect(s.effect());break}case"SucceedWith":{s=this.unsafeNextEffect(s.effect(this.runtimeConfig,this._id));break}case"Fail":{const a=s.cause(),c=lb(a)?a:db(a,this.unsafeCaptureTrace([Ft(s.trace)])),f=this.unsafeUnwindStack()?is(c):c,d=this.unsafeClearSuppressed(),y=Ur(f,d)?f:Nt(f,d);this.isStackEmpty?(this.unsafeSetInterrupting(!0),s=this.unsafeTryDone(Tt(y))):(this.unsafeSetInterrupting(!1),s=this.unsafeNextEffect(y));break}case"Fold":{const a=s;s=a.effect,this.pushContinuation(a);break}case"Suspend":{s=s.make();break}case"SuspendWith":{s=s.make(this.runtimeConfig,this._id);break}case"InterruptStatus":{const a=s.flag().toBoolean;(this.interruptStatus?this.interruptStatus.value:!0)!==a&&(this.interruptStatus=new J(a,this.interruptStatus),this.unsafeRestoreInterrupt()),s=s.effect;break}case"CheckInterrupt":{s=s.k(gu(this.unsafeIsInterruptible));break}case"Async":{const a=s,c=this.asyncEpoch;this.asyncEpoch=c+1,this.unsafeEnterAsync(c,a.blockingOn(),Ft(a.trace));const l=a.register,f=l(this.unsafeCreateAsyncResume(c));switch(f._tag){case"Left":{const d=f.left;this.unsafeSetAsyncCanceler(c,d),this.unsafeShouldInterrupt&&this.unsafeExitAsync(c)?(this.unsafeSetInterrupting(!0),s=L(d,()=>wt(()=>this.unsafeClearSuppressed(),S+":1261:49"),S+":1260:48")):s=void 0;break}case"Right":{this.unsafeExitAsync(c)?s=f.right:s=void 0;break}}break}case"Fork":{const a=s;s=this.unsafeNextEffect(this.unsafeFork(a.effect,Ft(a.trace),a.scope()));break}case"Descriptor":{s=s.f(this.unsafeGetDescriptor());break}case"Yield":{this.unsafeRunLater($),s=void 0;break}case"Trace":{s=this.unsafeNextEffect(this.unsafeCaptureTrace([Ft(s.trace)]));break}case"FiberRefModify":{const{tuple:[a,c]}=s.f(this.unsafeGetRef(s.fiberRef));this.unsafeSetRef(s.fiberRef,c),s=this.unsafeNextEffect(a);break}case"FiberRefModifyAll":{const{tuple:[a,c]}=s.f(this._id,fo(this.fiberRefLocals));this.fiberRefLocals=c.fiberRefLocals,s=this.unsafeNextEffect(a);break}case"FiberRefLocally":{const a=s,c=a.fiberRef,l=this.unsafeGetRef(c);this.unsafeSetRef(c,a.localValue),s=Je(a.effect,()=>p(()=>this.unsafeSetRef(c,l),S+":1351:39"),S+":1350:45");break}case"FiberRefDelete":{this.unsafeDeleteRef(s.fiberRef),s=this.unsafeNextEffect(void 0);break}case"FiberRefWith":{s=s.f(this.unsafeGetRef(s.fiberRef));break}case"RaceWith":{s=this.unsafeRace(s,Ft(s.trace));break}case"Supervise":{const a=s,c=this.runtimeConfig.value.supervisor,l=gb(a.supervisor(),c);this.runtimeConfig=Ls({...this.runtimeConfig.value,supervisor:l}),this.unsafeAddFinalizer(p(()=>{this.runtimeConfig=Ls({...this.runtimeConfig.value,supervisor:c})},S+":1390:37")),s=a.effect;break}case"GetForkScope":{s=s.f(nt(this.unsafeGetRef(Ye.value),()=>this._scope));break}case"OverrideForkScope":{const a=this.unsafeGetRef(Ye.value);this.unsafeSetRef(Ye.value,s.forkScope),this.unsafeAddFinalizer(p(()=>this.unsafeSetRef(Ye.value,a),S+":1428:37")),s=s.effect;break}case"Ensuring":{this.unsafeAddFinalizer(s.finalizer),s=s.effect;break}case"Logged":{const a=s;this.unsafeLogWith(a.message,a.cause,a.overrideLogLevel,a.overrideRef1,a.overrideValue1,a.trace),s=this.unsafeNextEffect(void 0);break}case"SetRuntimeConfig":{this.runtimeConfig=s.runtimeConfig,s=$;break}}}u=u+1}while(s!=null)}catch(u){if(u instanceof es){const o=s?.trace;s=tr(()=>Be,o),this.unsafeSetInterrupting(!0)}else if(u instanceof Uh.Error)switch(u.exit._tag){case"Success":{s=this.unsafeNextEffect(u.exit.value);break}case"Failure":{const o=s?s.trace:void 0;s=wt(()=>u.exit.cause,o);break}}else this.runtimeConfig.value.fatal(u)?(Mb.set(!0),this.runtimeConfig.value.reportFatal(u),s=void 0):(this.unsafeSetInterrupting(!0),s=xc(()=>u,S+":1517:45"))}}finally{we(this.runtimeConfig.value.flags,vu)&&bo.set(null),this.runtimeConfig.value.supervisor!==tn&&this.runtimeConfig.value.supervisor.unsafeOnSuspend(this)}}run(){return this.runUntil(this.runtimeConfig.value.maxOp)}}Ll=ac;const Se="(@effect/core) _src/io/Runtime/definition.ts";class Fb{constructor(t,n){this.environment=t,this.runtimeConfig=n,this.unsafeRunWith=(r,s,i)=>{const u=nl(Ft(i)),o=new Set,a=this.runtimeConfig.value.supervisor,c=hg(b(En.value,K(b(u,this.environment),j())),b(fg.value,K(b(u,lg.value),j()))),l=new Hi(u,o,c,this.runtimeConfig,new J(uc.toBoolean));return fc.value.unsafeAdd(this.runtimeConfig,l,Se+":32:38"),a!==tn&&(a.unsafeOnStart(this.environment,r,E,l),l.unsafeOnDone(f=>a.unsafeOnEnd(Tn(f),l))),l.nextEffect=r,l.run(),l.unsafeOnDone(f=>{s(Tn(f))}),f=>d=>this.unsafeRunAsyncWith(l._interruptAs(f),y=>d(Tn(y)),Se+":46:50")},this.unsafeRunAsync=(r,s)=>this.unsafeRunAsyncWith(r,Un,Se+":56:35"),this.unsafeRunAsyncWith=(r,s,i)=>{this.unsafeRunWith(r,s,Se+":71:23")},this.unsafeRunPromise=(r,s)=>new Promise((i,u)=>{this.unsafeRunAsyncWith(r,o=>{switch(o._tag){case"Success":{i(o.value);break}case"Failure":{u(Sg(o.cause,rt));break}}},Se+":87:30")}),this.unsafeRunPromiseExit=(r,s)=>new Promise(i=>{this.unsafeRunAsyncWith(r,u=>{i(u)},Se+":114:30")})}}const Lb="(@effect/core) _src/io/Supervisor/operations/track.ts",Nb=Ob,qb=2**31-1;function Ob(){const e=new Set,t=new ae(void 0);return new Pi(p(()=>kt(e),Lb+":23:19"),(n,r,s,i)=>{e.has(i)?t.get==null&&t.set(setInterval(()=>{},qb)):e.add(i)},(n,r)=>{if(e.delete(r),e.size===0){const s=t.get;s&&clearInterval(s)}})}const zb=hy(or,e=>e.ordinal);function Pb(e,t){return!fy(zb)(e,t)}function Db(e,t){return`${e.label.indexOf(" ")<0?e.label:`"${e.label}"`}=${t-e.startTime}ms`}const Ub={apply:(e,t,n,r,s,i,u,o)=>{s();const a=new Date,c=a.getTime();let l=[`timestamp=${a.toISOString()}`,` level=${n.label}`,` thread=#${Fs(t)}`,` message="${r()}"`].join("");if(ct(u)>0){l=l+" ";let f=!0;for(const d of u)f?f=!1:l=l+" ",l=l+Db(d,c)}if(e._tag==="SourceLocation"){const f=`${e.fileName}:${e.lineNumber}:${e.columnNumber}`;l=l+" location=",l=Wr(f,l)}if(El(o)>0){l=l+" ";let f=!0;for(const{tuple:[d,y]}of o)f?f=!1:l=l+" ",l=Wr(d,l),l=l+"=",l=Wr(y,l)}return l}};function Wr(e,t){return e.indexOf(" ")<0?t+e:t+`"${e}"`}function Bb(e,t){return{apply:(n,r,s,i,u,o,a,c)=>t(e.apply(n,r,s,i,u,o,a,c))}}function Wb(e,t){return{apply:(n,r,s,i,u,o,a,c)=>t(s)?A(e.apply(n,r,s,i,u,o,a,c)):E}}function Nl(e){return{flags:e}}const Gb=Nl(U());function Tb(e,t){return Nl(ht(e.flags,t))}const Hb=Ls({fatal:()=>!1,reportFatal:e=>{throw e},supervisor:Nb(),loggers:ni(Wb(Bb(Ub,e=>console.log(e)),e=>Pb(e,Rl))),flags:Tb(Gb,lc),maxOp:2048}),Ln=new Fb(xt.empty,Hb),jb=Ln.unsafeRunPromise;Ln.unsafeRunAsync;Ln.unsafeRunAsyncWith;Ln.unsafeRunPromiseExit;Ln.unsafeRunWith;function ql(e,t){return ft(e)?E:t(e.value)}function Kb(e){return t=>e.map(()=>t)(e.any())}function Qb(e){return(t,n)=>e.map(({tuple:[r,s]})=>s(r))(e.both(t)(n))}function Ol(e){return t=>n=>Qb(e)(n,t)}function ji(e,t,n){return function(r){const s=n.concat([r]);return t===0?e.apply(null,s):ji(e,t-1,s)}}function Vb(e){const t=e.length;return ji((...n)=>{const r={};for(let s=0;s<t;s++)r[e[s]]=n[s];return r},t-1,[])}function Xb(e){return t=>{const n=Ol(e),r=Object.keys(t),s=r.length,i=Vb(r);let u=e.map(i)(t[r[0]]);for(let o=1;o<s;o++)u=n(t[r[o]])(u);return u}}const Gr={};function Zb(e){return Gr.hasOwnProperty(e)||(Gr[e]=ji((...t)=>t,e-1,[])),Gr[e]}const Yb=e=>(...t)=>{const n=Ol(e),r=t.length,s=Zb(r);let i=e.map(s)(t[0]);for(let u=1;u<r;u++)i=n(t[u])(i);return i},zl={any:()=>he({})};function Pl(e,t){return di(e)?e:he(t(e.right))}const Jb=e=>t=>Pl(t,e),Dl={map:Jb};function Ul(e,t){return di(e)?e:t(e.right)}function t_(e){return Ul(e,rt)}const e_={flatten:e=>t_(e)},n_={...zl,...Dl,...e_};function r_(e,t){return Ul(e,n=>Pl(t,r=>b(n,r)))}const s_=e=>t=>r_(t,e),i_={both:s_},u_={...zl,...Dl,...i_},o_={either:he},a_={fail:Ge};function c_(e){return t=>({any:e.any,map:e.map,both:n=>r=>{const s=e.both(e.either(n))(e.either(r));return e.flatten(e.map(({tuple:[i,u]})=>sn(i,o=>sn(u,a=>e.fail(t.combine(o,a)),()=>e.fail(o)),o=>sn(u,a=>e.fail(a),a=>Kb(e)(b(o,a)))))(s))}})}({...n_,...o_,...a_,...u_});const Bl={map:_g},Wl={any:()=>A({})};function l_(e){return ql(e,rt)}const f_={flatten:e=>l_(e)},h_={...Wl,...f_},Gl={...Bl,...h_};function d_(e,t){return ql(e,n=>Ir(t,r=>b(n,r)))}const p_=e=>t=>d_(t,e),m_={both:p_},g_={...Wl,...m_},Tl={...Bl,...g_};({...Gl,...Tl});({...Gl,...Tl});const Ns="(@org/web) src/App.ts",_o=e=>e.toString(),So=Of(1,2,3,4,5),y_=qm({actual:Uu(Ah(So,_o)),expected:R(Uu(So),e=>De(e,_o),Ns+":9:36")},Ns+":7:30"),{actual:b_,expected:k_}=await jb(y_,Ns+":12:60");console.log(b_);const __=5,S_=nf('<p class="text-4xl text-green-700 text-center py-20">Hello tailwind!</p>');console.log(__);const w_=()=>S_.cloneNode(!0);ef(()=>Jl(w_,{}),document.getElementById("root"));
